{"version":3,"file":"static/js/973.0f876bf5.chunk.js","mappings":"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","sources":["Api/AxiosClient.js","Component/Footer.js","Component/NavMenu.js","Component/EditRevenueCost.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'http://192.168.0.106',\n  withCredentials: true\n});\n\nlet isRefreshing = false;\nlet failedQueue = [];\n\nconst processQueue = (error, token = null) => {\n  failedQueue.forEach(promise => {\n    if (error) {\n      promise.reject(error);\n    } else {\n      promise.resolve(token);\n    }\n  });\n  failedQueue = [];\n};\n\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\napi.interceptors.response.use(\n  response => response,\n  async error => {\n    const originalRequest = error.config;\n\n    if (\n      originalRequest &&\n      !originalRequest._retry &&\n      (error.message === \"Access token expired\" || (error.response && error.response.status === 401))\n    ) {\n      if (isRefreshing) {\n        return new Promise((resolve, reject) => {\n          failedQueue.push({ resolve, reject });\n        })\n          .then(token => {\n            originalRequest.headers.Authorization = `Bearer ${token}`;\n            return api(originalRequest);\n          })\n          .catch(err => Promise.reject(err));\n      }\n\n      originalRequest._retry = true;\n      isRefreshing = true;\n\n      try {\n        const response = await axios.post('http://192.168.0.106/auth/refresh', {},{withCredentials : true});\n        const newAccessToken = response.data.accessToken;\n        const newRefreshToken = response.data.refreshToken;\n\n        localStorage.setItem('token', newAccessToken);\n\n        processQueue(null, newAccessToken);\n\n        originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n        return api(originalRequest);\n      } catch (err) {\n        processQueue(err, null);\n        localStorage.removeItem(\"token\");\n        localStorage.removeItem(\"refreshToken\");\n        window.location.href = \"/\";\n        return Promise.reject(err);\n      } finally {\n        isRefreshing = false;\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n","import React from 'react';\nimport '../Style/Footer.css';\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap';\n\nexport default function Footer() {\n  const logoutTooltip = <Tooltip id=\"logout-tooltip\" className=\"custom-tooltip\">المبرمجين : مصطفى نجم - جيان حسين</Tooltip>;\n\n  return (\n    <OverlayTrigger placement=\"top\" className=\"custom-tooltip\"  overlay={logoutTooltip}>\n    \n    <footer className=\"page-footer\">\n      جميع الحقوق محفوظة © {new Date().getFullYear()} قسم تقنية المعلومات\n    </footer>\n    </OverlayTrigger>\n    \n  );\n}","import React, { useEffect, useState } from \"react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport \"../Style/NavStyle.css\";\n\nexport default function NavBar() {\n  const navigate = useNavigate();\n  const [username, setUsername] = useState(\"\");\n  const [UserDepartment, setUserDepartment] = useState(\"\");\n\n\n  useEffect(() => {\n    const storedUsername = localStorage.getItem(\"username\");\n    if (storedUsername) {\n      setUsername(storedUsername);\n    }\n\n    const storedUserDepartment = localStorage.getItem(\"UserDepartment\");\n    if (storedUserDepartment) {\n      setUserDepartment(storedUserDepartment);\n    }\n  }, []);\n\n  const handleLogout = async () => {\n    try {\n      await axios.post(\n        \"http://localhost:5109/Auth/logout\",\n        {},\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        }\n      );\n\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"roles\");\n      localStorage.removeItem(\"username\");\n\n      navigate(\"/\");\n    } catch (err) {\n      console.error(\"Logout failed:\", err);\n      alert(\"فشل تسجيل الخروج، حاول مرة أخرى.\");\n    }\n  };\n\n  const renderNavItem = (to, label) => (\n    <NavLink\n      to={to}\n      className={({ isActive }) =>\n        `text-decoration-none nav-link${isActive ? \" active-link\" : \"\"}`\n      }\n      end\n      aria-current=\"page\"\n    >\n      {label}\n    </NavLink>\n  );\n\n  return (\n    <nav\n      className=\"bg-custom d-flex justify-content-between flex-row-reverse p-3\"\n      aria-label=\"Primary navigation\"\n    >\n      <div className=\"fs-4 fw-bold hlogo\">\n        <NavLink to=\"/dashboard\" className=\"nav-brand-link\">\n          نظام المنح والقروض\n          <div style={{ display: 'flex', alignItems: 'center' ,justifyContent: 'center', margin:'0 10px' }}>\n          <img src=\"/Images/bank.png\" className=\"logo-shadow-rounded\" alt=\"\" width=\"50px\" height=\"50px\" /></div>\n\n        </NavLink>\n      </div>\n\n      <ul className=\"d-flex flex-row-reverse gap-3 list-unstyled mb-0 align-items-center fw-bold\">\n        <li>{renderNavItem(\"/dashboard\", \"الصفحة الرئيسية\")}</li>\n        <li>{renderNavItem(\"/contracts\", \" العقود\")}</li>\n        <li>{renderNavItem(\"/Loans\", \" القروض\")}</li>\n        <li>{renderNavItem(\"/RevenueList\", \" الايرادات\")}</li>\n        <li>{renderNavItem(\"/AdminPanel\", \"المستخدمين\")}</li>\n        {/* <li>{renderNavItem(\"/AdminDashboard\", \"لوحة التحكم\")}</li> */}\n      </ul>\n\n      <div className=\"d-flex align-items-center gap-2\">\n        <OverlayTrigger\n          placement=\"bottom\"\n          overlay={<Tooltip id=\"logout-tooltip\">تسجيل الخروج</Tooltip>}\n        >\n          <button\n            aria-label=\"تسجيل الخروج\"\n            className=\"btn btn-outline-danger logoutB\"\n            onClick={handleLogout}\n            type=\"button\"\n          >\n                    <span className=\"navbar-username\">{username.toUpperCase() }</span>\n\n\n            <img\n              className=\"PowImg\"\n              src=\"/Images/power.gif\"\n              alt=\"Power GIF\"\n              style={{ borderRadius: \"50%\" }}\n              width=\"20\"\n              height=\"20\"\n            />\n          </button>\n        </OverlayTrigger>\n<h6 className=\"headingDep\">{UserDepartment || \"لا يوجد قسم\"}</h6>\n                  <span className=\"navbar-username\">\n                              <NavLink to=\"/ChangePassword\" className=\"nav-brand-link\">\n\n                        تغيير كلمة المرور\n                      </NavLink>\n                    </span>\n      </div>\n    </nav>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport api from '../Api/AxiosClient';\nimport NavMenu from './NavMenu';\nimport Footer from './Footer';\nimport '../Style/AddContract.css';\nimport { toast as toastify } from 'react-toastify';\n\nexport default function EditRevenueCosts() {\n  const { id } = useParams(); // Get ID from URL params for edit mode\n  const navigate = useNavigate();\n  const isEditMode = Boolean(id);\n  \n  const [revenues, setRevenues] = useState([]);\n  const [formData, setFormData] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [departmentName, setDepartmentName] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());\n  const [selectedMonth, setSelectedMonth] = useState(new Date().getMonth() + 1);\n  const [debugInfo, setDebugInfo] = useState('');\n  const [existingRecords, setExistingRecords] = useState([]);\n  const [editingRecord, setEditingRecord] = useState(null);\n  \n  const toast = ({ title, description, type = 'info' }) => {\n    toastify(\n      <div>\n        <strong>{title}</strong>\n        <div>{description}</div>\n      </div>,\n      {\n        position: \"top-right\",\n        autoClose: 5000,\n        type: type\n      }\n    );\n  };\n\n  useEffect(() => {\n    const storedDept = localStorage.getItem(\"UserDepartment\");\n    console.log('Department from localStorage:', storedDept);\n    if (storedDept) {\n      setDepartmentName(storedDept);\n    } else {\n      setError('لم يتم العثور على معلومات القسم');\n    }\n  }, []);\n\n  // Fetch record for editing if in edit mode\n  useEffect(() => {\n    if (isEditMode && id) {\n      fetchRecordForEdit(id);\n    }\n  }, [isEditMode, id]);\n\n  const fetchRecordForEdit = async (recordId) => {\n    try {\n      setLoading(true);\n      console.log('Fetching record for edit, ID:', recordId);\n      \n      const response = await api.get(`/BudgetRevenue/GetRevenueCostById/${recordId}`);\n      const record = response.data;\n      \n      console.log('Fetched record:', record);\n      \n      setEditingRecord(record);\n      setDepartmentName(record.department);\n      setSelectedYear(record.year);\n      setSelectedMonth(record.month);\n      \n      // Set form data with the existing value\n      setFormData({\n        [record.revenueId]: record.revenueCost.toString()\n      });\n      \n    } catch (err) {\n      console.error('Error fetching record for edit:', err);\n      setError('فشل في تحميل البيانات للتعديل');\n      toast({\n        title: 'خطأ',\n        description: 'فشل في تحميل البيانات للتعديل',\n        type: 'error'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        setLoading(true);\n        console.log('Fetching revenues...');\n        const res = await api.get('/RevenuInfo/GetAllRevenues');\n        console.log('Raw response:', res);\n        console.log('Response data:', res.data);\n        \n        let revenueData = [];\n        if (res.data.loans) {\n          revenueData = res.data.loans;\n        } else if (res.data.revenues) {\n          revenueData = res.data.revenues;\n        } else if (Array.isArray(res.data)) {\n          revenueData = res.data;\n        }\n        \n        console.log('Processed revenue data:', revenueData);\n        setRevenues(revenueData);\n        \n      } catch (err) {\n        console.error('Error fetching revenues:', err);\n        setError('فشل تحميل البيانات');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchData();\n  }, []);\n\n  // Fetch existing records for the selected year/month/department\n  useEffect(() => {\n    if (!isEditMode && departmentName && selectedYear && selectedMonth) {\n      fetchExistingRecords();\n    }\n  }, [departmentName, selectedYear, selectedMonth, isEditMode]);\n\n  const fetchExistingRecords = async () => {\n    try {\n      console.log('Fetching existing records...');\n      const response = await api.get('/BudgetRevenue/GetAllRevenuesCost', {\n        params: {\n          page: 1,\n          pageSize: 1000 // Get all records\n        }\n      });\n      \n      const allRecords = response.data.revenues || [];\n      const filteredRecords = allRecords.filter(record => \n        record.department === departmentName &&\n        record.year === selectedYear &&\n        record.month === selectedMonth\n      );\n      \n      console.log('Existing records for this period:', filteredRecords);\n      setExistingRecords(filteredRecords);\n      \n      // Pre-populate form with existing values\n      const existingFormData = {};\n      filteredRecords.forEach(record => {\n        existingFormData[record.revenueId] = record.revenueCost.toString();\n      });\n      setFormData(existingFormData);\n      \n    } catch (err) {\n      console.error('Error fetching existing records:', err);\n    }\n  };\n\n  const handleChange = (id, value) => {\n    console.log(`Changing revenue ${id} to value:`, value);\n    setFormData(prev => ({\n      ...prev,\n      [id]: value,\n    }));\n  };\n\n  const checkExistingEntry = async (revenueId, department, year, month) => {\n    try {\n      const response = await api.get('/BudgetRevenue/CheckExisting', {\n        params: {\n          revenueId: revenueId,\n          department: department,\n          year: year,\n          month: month\n        }\n      });\n      return response.data.exists;\n    } catch (error) {\n      console.error('Error checking existing entry:', error);\n      return false;\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess('');\n    setDebugInfo('');\n\n    console.log('=== FORM SUBMISSION DEBUG ===');\n    console.log('Is Edit Mode:', isEditMode);\n    console.log('Form data:', formData);\n    console.log('Department:', departmentName);\n    console.log('Year:', selectedYear, typeof selectedYear);\n    console.log('Month:', selectedMonth, typeof selectedMonth);\n    console.log('Revenues:', revenues);\n\n    try {\n      if (isEditMode) {\n        // Handle single record update\n        await handleUpdateRecord();\n      } else {\n        // Handle multiple records add/update\n        await handleBulkAddUpdate();\n      }\n    } catch (err) {\n      console.error('General error:', err);\n      setError('خطأ عام في الإرسال');\n      setDebugInfo(err.message);\n\n      toast({\n        title: 'خطأ عام',\n        description: 'حدث خطأ غير متوقع أثناء الإرسال',\n        type: 'error'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdateRecord = async () => {\n    if (!editingRecord) return;\n\n    const revenueId = editingRecord.revenueId;\n    const cost = formData[revenueId];\n\n    if (cost == null || cost === '') {\n      setError('يجب إدخال قيمة التكلفة');\n      return;\n    }\n\n    const updateData = {\n      RevenueId: parseInt(revenueId),\n      Department: departmentName?.trim() || '',\n      RevenueCost: parseFloat(cost),\n      Year: parseInt(selectedYear),\n      Month: parseInt(selectedMonth),\n      Notes: \"تم التحديث من الواجهة\",\n    };\n\n    console.log('Updating record with data:', updateData);\n\n    try {\n      const response = await api.put(`/BudgetRevenue/UpdateRevenueCost/${editingRecord.id}`, updateData);\n      console.log('✅ Update Success:', response.data);\n\n      setSuccess('تم تحديث التكلفة بنجاح!');\n      \n      toast({\n        title: 'تم التحديث بنجاح',\n        description: 'تم تحديث التكلفة بنجاح',\n        type: 'success'\n      });\n\n      // Navigate back after successful update\n      setTimeout(() => {\n        navigate('/RevenueList'); // Adjust path as needed\n      }, 2000);\n\n    } catch (error) {\n      console.error('❌ Update Error:', error);\n      const errorMsg = error.response?.data?.message || error.response?.data?.Error || 'فشل في التحديث';\n      setError(errorMsg);\n      setDebugInfo(JSON.stringify(error.response?.data, null, 2));\n\n      toast({\n        title: 'فشل التحديث',\n        description: errorMsg,\n        type: 'error'\n      });\n    }\n  };\n\n  const handleBulkAddUpdate = async () => {\n    const submissions = [];\n    const duplicateEntries = [];\n    \n    for (const revenue of revenues) {\n      const cost = formData[revenue.id];\n      if (cost != null && cost !== '') {\n        // Check if this is an update to an existing record\n        const existingRecord = existingRecords.find(r => r.revenueId === revenue.id);\n        \n        const submissionData = {\n          RevenueId: parseInt(revenue.id),\n          Department: departmentName?.trim() || '',\n          RevenueCost: parseFloat(cost),\n          Year: parseInt(selectedYear),\n          Month: parseInt(selectedMonth),\n          Notes: existingRecord ? \"تم التحديث من الواجهة\" : \"تمت الإضافة من الواجهة\",\n        };\n\n        console.log(`\\n--- ${existingRecord ? 'Updating' : 'Adding'} for ${revenue.revenueName} ---`);\n        console.log('Submission data:', submissionData);\n\n        try {\n          let response;\n          if (existingRecord) {\n            // Update existing record\n            response = await api.put(`/BudgetRevenue/UpdateRevenueCost/${existingRecord.id}`, submissionData);\n            console.log('✅ Update Success:', response.data);\n          } else {\n            // Add new record\n            response = await api.post('/BudgetRevenue/AddRevenueCost', submissionData);\n            console.log('✅ Add Success:', response.data);\n          }\n\n          submissions.push({\n            revenue: revenue.revenueName,\n            status: 'success',\n            action: existingRecord ? 'updated' : 'added',\n            response: response.data\n          });\n\n        } catch (error) {\n          console.error('❌ Error:', error);\n\n          submissions.push({\n            revenue: revenue.revenueName,\n            status: 'error',\n            action: existingRecord ? 'update' : 'add',\n            response: error.response?.data || error.message\n          });\n        }\n      }\n    }\n\n    console.log('=== SUBMISSION SUMMARY ===');\n    console.log('All submissions:', submissions);\n\n    const successful = submissions.filter(s => s.status === 'success');\n    const failed = submissions.filter(s => s.status === 'error');\n\n    // Handle results\n    if (successful.length > 0 && failed.length === 0) {\n      const addedCount = successful.filter(s => s.action === 'added').length;\n      const updatedCount = successful.filter(s => s.action === 'updated').length;\n      \n      let message = '';\n      if (addedCount > 0 && updatedCount > 0) {\n        message = `تمت إضافة ${addedCount} وتحديث ${updatedCount} تكاليف بنجاح!`;\n      } else if (addedCount > 0) {\n        message = `تمت إضافة ${addedCount} تكاليف بنجاح!`;\n      } else {\n        message = `تم تحديث ${updatedCount} تكاليف بنجاح!`;\n      }\n      \n      setSuccess(message);\n      \n      toast({\n        title: 'تمت العملية بنجاح',\n        description: message,\n        type: 'success'\n      });\n\n      // Refresh existing records\n      fetchExistingRecords();\n\n    } else if (successful.length > 0 && failed.length > 0) {\n      const errorMessages = failed.map(f => \n        `${f.revenue}: ${JSON.stringify(f.response)}`\n      ).join('\\n');\n      setError(`تمت معالجة ${successful.length} تكاليف، وفشل ${failed.length} تكاليف`);\n      setDebugInfo(`التفاصيل:\\n${errorMessages}`);\n\n      toast({\n        title: 'تمت العملية جزئياً',\n        description: `تمت معالجة ${successful.length} تكاليف بنجاح، وفشل ${failed.length} تكاليف`,\n        type: 'warning'\n      });\n\n    } else if (failed.length > 0) {\n      const errorMessages = failed.map(f => \n        `${f.revenue}: ${JSON.stringify(f.response)}`\n      ).join('\\n');\n      setError(`فشل في حفظ جميع التكاليف (${failed.length} عنصر)`);\n      setDebugInfo(`التفاصيل:\\n${errorMessages}`);\n\n      toast({\n        title: 'فشلت العملية',\n        description: `فشل في حفظ جميع التكاليف (${failed.length} عنصر)`,\n        type: 'error'\n      });\n\n    } else {\n      toast({\n        title: 'تنبيه',\n        description: 'لم يتم إدخال أي بيانات',\n        type: 'info'\n      });\n    }\n  };\n\n  const getFieldStatus = (revenueId) => {\n    const existingRecord = existingRecords.find(r => r.revenueId === revenueId);\n    if (existingRecord) {\n      const currentValue = formData[revenueId];\n      const originalValue = existingRecord.revenueCost.toString();\n      return currentValue !== originalValue ? 'modified' : 'existing';\n    }\n    return formData[revenueId] ? 'new' : 'empty';\n  };\n\n  const getFieldClassName = (revenueId) => {\n    const status = getFieldStatus(revenueId);\n    let baseClass = \"form-control\";\n    \n    switch (status) {\n      case 'existing':\n        return `${baseClass} border-info`; // Blue border for existing\n      case 'modified':\n        return `${baseClass} border-warning`; // Orange border for modified\n      case 'new':\n        return `${baseClass} border-success`; // Green border for new\n      default:\n        return baseClass;\n    }\n  };\n\n  return (\n    <div className=\"d-flex flex-column min-vh-100\">\n      <NavMenu />\n      <main className=\"flex-fill container my-4\">\n        <div className=\"contract-form-container\">\n          <h2>\n            {isEditMode ? 'تعديل تكلفة الإيراد' : `إضافة تكاليف الإيرادات لقسم ${departmentName}`}\n          </h2>\n\n          {error && (\n            <div className=\"alert alert-danger\">\n              <strong>{error}</strong>\n              {debugInfo && (\n                <pre className=\"mt-2\" style={{fontSize: '12px'}}>\n                  {debugInfo}\n                </pre>\n              )}\n            </div>\n          )}\n          \n          {success && <div className=\"alert alert-success\">{success}</div>}\n\n          {!isEditMode && existingRecords.length > 0 && (\n            <div className=\"alert alert-info\">\n              <strong>تنبيه:</strong> توجد بيانات مسجلة مسبقاً لهذه الفترة. \n              <br />\n              <small>\n                الحقول الزرقاء: بيانات موجودة | \n                الحقول البرتقالية: تم تعديلها | \n                الحقول الخضراء: بيانات جديدة\n              </small>\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"row g-3\">\n            <div className=\"col-md-3\">\n              <label className=\"form-label\">السنة</label>\n              <input\n                type=\"number\"\n                className=\"form-control\"\n                min=\"2000\"\n                max=\"2100\"\n                step=\"1\"\n                value={selectedYear}\n                onChange={(e) => {\n                  const val = parseInt(e.target.value);\n                  console.log('Year changed to:', val, typeof val);\n                  setSelectedYear(val);\n                }}\n                placeholder=\"أدخل السنة\"\n                disabled={isEditMode}\n                required\n              />\n            </div>\n\n            <div className=\"col-md-3\">\n              <label className=\"form-label\">الشهر</label>\n              <select\n                className=\"form-select\"\n                value={selectedMonth}\n                onChange={(e) => {\n                  const val = parseInt(e.target.value);\n                  console.log('Month changed to:', val, typeof val);\n                  setSelectedMonth(val);\n                }}\n                disabled={isEditMode}\n                required\n              >\n                {[\n                  \"يناير\", \"فبراير\", \"مارس\", \"أبريل\", \"مايو\", \"يونيو\",\n                  \"يوليو\", \"أغسطس\", \"سبتمبر\", \"أكتوبر\", \"نوفمبر\", \"ديسمبر\"\n                ].map((name, index) => (\n                  <option key={index + 1} value={index + 1}>\n                    {name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">القسم</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                value={departmentName}\n                onChange={(e) => {\n                  console.log('Department changed to:', e.target.value);\n                  setDepartmentName(e.target.value);\n                }}\n                placeholder=\"اسم القسم\"\n                disabled={isEditMode}\n                readOnly={!isEditMode}\n                required\n              />\n            </div>\n\n            {isEditMode ? (\n              // Edit mode - show only the specific revenue being edited\n              editingRecord && (\n                <div className=\"col-12\">\n                  <hr />\n                  <h5 className=\"mt-2 text-center font-bold\">تعديل التكلفة</h5>\n                  <div className=\"row justify-content-center\">\n                    <div className=\"col-md-6\">\n                      <label className=\"form-label\">\n                        {revenues.find(r => r.id === editingRecord.revenueId)?.revenueName || 'الإيراد'}\n                      </label>\n                      <input\n                        type=\"number\"\n                        className=\"form-control border-warning\"\n                        min=\"0\"\n                        step=\"0.01\"\n                        value={formData[editingRecord.revenueId] || ''}\n                        onChange={(e) => {\n                          console.log(`Revenue ${editingRecord.revenueId} changed to:`, e.target.value);\n                          handleChange(editingRecord.revenueId, e.target.value);\n                        }}\n                        placeholder=\"أدخل قيمة التكلفة\"\n                        required\n                      />\n                      <small className=\"text-muted\">\n                        القيمة الأصلية: {editingRecord.revenueCost}\n                      </small>\n                    </div>\n                  </div>\n                </div>\n              )\n            ) : (\n              // Add/bulk edit mode - show all revenues\n              <>\n                <hr />\n                <h5 className=\"mt-2 text-center font-bold\">الايرادات التشغيلية</h5>\n                <div className=\"row\">\n                  {revenues\n                    .filter(rev => rev.revenueName !== \"الايرادات الاستثمارية\")\n                    .map(rev => (\n                      <div key={rev.id} className=\"col-md-6\">\n                        <label className=\"form-label\">\n                          {rev.revenueName}\n                          {getFieldStatus(rev.id) === 'existing' && <span className=\"badge bg-info ms-2\">موجود</span>}\n                          {getFieldStatus(rev.id) === 'modified' && <span className=\"badge bg-warning ms-2\">تم التعديل</span>}\n                          {getFieldStatus(rev.id) === 'new' && <span className=\"badge bg-success ms-2\">جديد</span>}\n                        </label>\n                        <input\n                          type=\"number\"\n                          className={getFieldClassName(rev.id)}\n                          min=\"0\"\n                          step=\"0.01\"\n                          value={formData[rev.id] || ''}\n                          onChange={(e) => {\n                            console.log(`Revenue ${rev.id} (${rev.revenueName}) changed to:`, e.target.value);\n                            handleChange(rev.id, e.target.value);\n                          }}\n                          placeholder=\"أدخل قيمة التكلفة\"\n                        />\n                      </div>\n                    ))}\n                </div>\n\n                <hr />\n                <h5 className=\"mt-4 text-center font-bold\">الايرادات الاستثمارية</h5>\n                <div className=\"row\">\n                  {revenues\n                    .filter(rev => rev.revenueName === \"الايرادات الاستثمارية\")\n                    .map(rev => (\n                      <div key={rev.id} className=\"col-md-6\">\n                        <label className=\"form-label\">\n                          {rev.revenueName}\n                          {getFieldStatus(rev.id) === 'existing' && <span className=\"badge bg-info ms-2\">موجود</span>}\n                          {getFieldStatus(rev.id) === 'modified' && <span className=\"badge bg-warning ms-2\">تم التعديل</span>}\n                          {getFieldStatus(rev.id) === 'new' && <span className=\"badge bg-success ms-2\">جديد</span>}\n                        </label>\n                        <input\n                          type=\"number\"\n                          className={getFieldClassName(rev.id)}\n                          min=\"0\"\n                          step=\"0.01\"\n                          value={formData[rev.id] || ''}\n                          onChange={(e) => {\n                            console.log(`Revenue ${rev.id} (${rev.revenueName}) changed to:`, e.target.value);\n                            handleChange(rev.id, e.target.value);\n                          }}\n                          placeholder=\"أدخل قيمة التكلفة\"\n                        />\n                      </div>\n                    ))}\n                </div>\n              </>\n            )}\n\n            <div className=\"col-12\">\n              <button \n                type=\"submit\" \n                className={`btn ${isEditMode ? 'btn-warning' : 'btn-success'}`}\n                disabled={loading || revenues.length === 0}\n              >\n                {loading \n                  ? (isEditMode ? 'جارٍ التحديث...' : 'جارٍ الإضافة...') \n                  : (isEditMode ? 'تحديث التكلفة' : 'حفظ التكاليف')\n                }\n              </button>\n              \n              {isEditMode && (\n                <button \n                  type=\"button\" \n                  className=\"btn btn-secondary ms-2\"\n                  onClick={() => navigate('/RevenueList')}\n                  disabled={loading}\n                >\n                  إلغاء\n                </button>\n              )}\n            </div>\n          </form>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n}"],"names":["api","axios","create","baseURL","withCredentials","isRefreshing","failedQueue","processQueue","error","token","arguments","length","undefined","forEach","promise","reject","resolve","interceptors","request","use","config","localStorage","getItem","headers","Authorization","response","async","originalRequest","_retry","message","status","Promise","push","then","catch","err","post","newAccessToken","data","accessToken","refreshToken","setItem","removeItem","window","location","href","Footer","logoutTooltip","_jsx","Tooltip","id","className","children","OverlayTrigger","placement","overlay","_jsxs","Date","getFullYear","NavBar","navigate","useNavigate","username","setUsername","useState","UserDepartment","setUserDepartment","useEffect","storedUsername","storedUserDepartment","renderNavItem","to","label","NavLink","_ref","isActive","end","style","display","alignItems","justifyContent","margin","src","alt","width","height","onClick","console","alert","type","toUpperCase","borderRadius","EditRevenueCosts","_revenues$find","useParams","isEditMode","Boolean","revenues","setRevenues","formData","setFormData","loading","setLoading","departmentName","setDepartmentName","setError","success","setSuccess","selectedYear","setSelectedYear","selectedMonth","setSelectedMonth","getMonth","debugInfo","setDebugInfo","existingRecords","setExistingRecords","editingRecord","setEditingRecord","toast","title","description","toastify","position","autoClose","storedDept","log","fetchRecordForEdit","recordId","record","get","department","year","month","revenueId","revenueCost","toString","res","revenueData","loans","Array","isArray","fetchData","fetchExistingRecords","params","page","pageSize","filteredRecords","filter","existingFormData","handleChange","value","prev","handleUpdateRecord","cost","updateData","RevenueId","parseInt","Department","trim","RevenueCost","parseFloat","Year","Month","Notes","put","setTimeout","_error$response","_error$response$data","_error$response2","_error$response2$data","_error$response3","errorMsg","Error","JSON","stringify","handleBulkAddUpdate","submissions","revenue","existingRecord","find","r","submissionData","revenueName","action","_error$response4","successful","s","failed","addedCount","updatedCount","errorMessages","map","f","join","getFieldStatus","getFieldClassName","baseClass","NavMenu","fontSize","onSubmit","e","preventDefault","min","max","step","onChange","val","target","placeholder","disabled","required","name","index","readOnly","_Fragment","rev"],"sourceRoot":""}