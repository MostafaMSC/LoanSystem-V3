{"version":3,"file":"static/js/418.a19d35c3.chunk.js","mappings":"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","sources":["Component/ContractList.js","Component/EditContract.js","Component/AddContract.js","Component/Footer.js","Component/NavMenu.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport api from '../Api/AxiosClient';\nimport '../Style/ContractsList.css';\nimport NavMenu from './NavMenu';\nimport Footer from './Footer';\nimport { NavLink, useNavigate } from 'react-router-dom';\nimport { toast as toastify } from 'react-toastify';\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap';\nimport '../Style/Cards.css';\nimport AddContract from './AddContract';\nimport EditContract from './EditContract';\nimport AddRevenue from './AddRevenu'\nexport default function ContractsList() {\n  const [contracts, setContracts] = useState([]);\n  const [loans, setLoans] = useState([]);\n  const [error, setError] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState('10');\n  const [totalPages, setTotalPages] = useState(1);\n  const [totalContractsCount, setTotalContractsCount] = useState(0);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [selectedContract, setSelectedContract] = useState(null);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [selectedContractId, setSelectedContractId] = useState(null);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [contractDocuments, setContractDocuments] = useState([]);\n  const [showAddContract, setShowAddContract] = useState(false);\n  const [showEditContract, setShowEditContract] = useState(false);\n  const [showAddRevenue, setShowAddRevenue] = useState(false);\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [showDateFilters, setShowDateFilters] = useState(false);\n  const [dateFilterType, setDateFilterType] = useState('contractSigningDate'); // or 'startDate'\n  const [quickDateFilter, setQuickDateFilter] = useState('');\n\n  const CONTRACT_TYPES = [\n    { id: 1, label: 'استشاري' },\n    { id: 2, label: 'تجهيز' },\n    { id: 3, label: 'اعمال' },\n    { id: 4, label: 'اخرى' }\n  ];\n  \n  const STATE_TYPES = [\n    { id: '1', Status: 'مستمر' },\n    { id: '2', Status: 'منجز' },\n  ];\n\n  const QUICK_DATE_FILTERS = [\n    { value: '', label: 'جميع التواريخ' },\n    { value: 'today', label: 'اليوم' },\n    { value: 'yesterday', label: 'أمس' },\n    { value: 'thisWeek', label: 'هذا الأسبوع' },\n    { value: 'lastWeek', label: 'الأسبوع الماضي' },\n    { value: 'thisMonth', label: 'هذا الشهر' },\n    { value: 'lastMonth', label: 'الشهر الماضي' },\n    { value: 'thisYear', label: 'هذا العام' },\n    { value: 'lastYear', label: 'العام الماضي' },\n    { value: 'custom', label: 'تخصيص' }\n  ];\nconst initialColumns = [\n  { key: 'contractNumber', label: 'رقم العقد', visible: true },\n  { key: 'contractName', label: 'اسم العقد', visible: true },\n  { key: 'companyName', label: 'اسم الشركة', visible: true },\n  { key: 'contractType', label: 'نوع العقد', visible: true },\n  { key: 'status', label: 'حالة العقد', visible: true },\n  { key: 'durationInDays', label: 'المدة المطلوبة (يوم)', visible: true },\n  { key: 'addedDays', label: 'المدة المضافة', visible: false },\n  { key: 'costChange', label: 'أوامر الغيار', visible: false },\n  { key: 'costPlanMins', label: 'كلف الادراج بوزارة التخطيط', visible: false },\n  { key: 'costToNatiBank', label: 'المرفوع للبنك الدولي', visible: false },\n  { key: 'totalCostPaid', label: 'المصروف التراكمي', visible: false },\n  { key: 'loanId', label: 'القرض المرتبط', visible: false },\n  { key: 'contractSigningDate', label: 'تاريخ توقيع العقد', visible: false },\n  { key: 'startDate', label: 'تاريخ المباشرة', visible: false },\n  { key: 'contractAmount', label: 'مبلغ العقد', visible: false },\n  { key: 'insuranceDeposits', label: 'الضمانات', visible: false },\n  { key: 'taxTrusts', label: 'الأمانات الضريبية', visible: false },\n  { key: 'penalties', label: 'الغرامات', visible: false },\n  { key: 'operationLoanCost', label: 'تكلفة تشغيل القرض', visible: false },\n  { key: 'actions', label: 'الإجراءات', visible: true }\n];\n\nconst [columns, setColumns] = useState(initialColumns);\n    const printReport = () => {\n  window.print();\n    };\nconst getContractTypeLabel = (id) => {\n  return CONTRACT_TYPES.find(type => type.id === id)?.label ?? '';\n};\n\nconst getStateTypeLabel = (id) => {\n  return STATE_TYPES.find(type => type.id === id)?.Status ?? '';\n};\n\nconst handleCancel = () => {\n    setShowEditContract(false);\n    setShowAddContract(false);\n    setShowAddRevenue(false);\n    fetchContracts(currentPage);\n    fetchLoans();\n};\n\n  const getLoanNameById = (loanId) => {\n    if (!loanId || !loans.length) return 'غير محدد';\n    const loan = loans.find((loan) => (loan.id || loan.ID) == loanId);\n    return loan ? (loan.loanName || loan.name || 'قرض') : 'غير موجود';\n  };\n\n  const fetchContracts = async (page) => {\n    const size = pageSize === '' ? 0 : parseInt(pageSize);\n    try {\n      const res = await api.get(`/Contracts/GetAllContracts?page=${page}&pageSize=${size}`);\n      setContracts(res.data.contracts);\n      setTotalContractsCount(res.data.totalCount || res.data.contracts.length);\n      setTotalPages(size > 0 ? Math.ceil(res.data.totalCount / size) : 1);\n      setError('');\n    } catch (err) {\n      setError('حدث خطأ أثناء جلب العقود.');\n    }\n  };\n\n  const fetchDocuments = async (contractId) => {\n    try {\n      const res = await api.get(`/Contracts/GetDocumentsByContractId/${contractId}`);\n      setContractDocuments(res.data.documents || []);\n    } catch (error) {\n      toast({ title: 'خطأ', description: 'فشل في جلب الوثائق' });\n    }\n  };\n\n  const fetchLoans = async () => {\n    try {\n      const response = await api.get('/Loan/GetAllLoans');\n      setLoans(response.data?.loans || []);\n    } catch {\n      console.error('Error fetching loans');\n    }\n  };\n\n  const toast = ({ title, description }) => {\n    toastify(\n      <div>\n        <strong>{title}</strong>\n        <div>{description}</div>\n      </div>,\n      {\n        position: 'top-right',\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      }\n    );\n  };\n\n  const getDateRangeFromQuickFilter = (filterType) => {\n    const today = new Date();\n    const todayStr = today.toISOString().split('T')[0];\n    \n    switch (filterType) {\n      case 'today':\n        return { start: todayStr, end: todayStr };\n      case 'yesterday':\n        const yesterday = new Date(today);\n        yesterday.setDate(yesterday.getDate() - 1);\n        const yesterdayStr = yesterday.toISOString().split('T')[0];\n        return { start: yesterdayStr, end: yesterdayStr };\n      case 'thisWeek':\n        const startOfWeek = new Date(today);\n        startOfWeek.setDate(today.getDate() - today.getDay());\n        const endOfWeek = new Date(startOfWeek);\n        endOfWeek.setDate(startOfWeek.getDate() + 6);\n        return { \n          start: startOfWeek.toISOString().split('T')[0], \n          end: endOfWeek.toISOString().split('T')[0] \n        };\n      case 'lastWeek':\n        const lastWeekStart = new Date(today);\n        lastWeekStart.setDate(today.getDate() - today.getDay() - 7);\n        const lastWeekEnd = new Date(lastWeekStart);\n        lastWeekEnd.setDate(lastWeekStart.getDate() + 6);\n        return { \n          start: lastWeekStart.toISOString().split('T')[0], \n          end: lastWeekEnd.toISOString().split('T')[0] \n        };\n      case 'thisMonth':\n        const firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);\n        const lastDayOfMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0);\n        return { \n          start: firstDayOfMonth.toISOString().split('T')[0], \n          end: lastDayOfMonth.toISOString().split('T')[0] \n        };\n      case 'lastMonth':\n        const firstDayOfLastMonth = new Date(today.getFullYear(), today.getMonth() - 1, 1);\n        const lastDayOfLastMonth = new Date(today.getFullYear(), today.getMonth(), 0);\n        return { \n          start: firstDayOfLastMonth.toISOString().split('T')[0], \n          end: lastDayOfLastMonth.toISOString().split('T')[0] \n        };\n      case 'thisYear':\n        const firstDayOfYear = new Date(today.getFullYear(), 0, 1);\n        const lastDayOfYear = new Date(today.getFullYear(), 11, 31);\n        return { \n          start: firstDayOfYear.toISOString().split('T')[0], \n          end: lastDayOfYear.toISOString().split('T')[0] \n        };\n      case 'lastYear':\n        const firstDayOfLastYear = new Date(today.getFullYear() - 1, 0, 1);\n        const lastDayOfLastYear = new Date(today.getFullYear() - 1, 11, 31);\n        return { \n          start: firstDayOfLastYear.toISOString().split('T')[0], \n          end: lastDayOfLastYear.toISOString().split('T')[0] \n        };\n      default:\n        return { start: '', end: '' };\n    }\n  };\n\n  // Handle quick date filter change\n  const handleQuickDateFilterChange = (filterType) => {\n    setQuickDateFilter(filterType);\n    if (filterType === 'custom') {\n      // Keep current custom dates\n      return;\n    }\n    if (filterType === '') {\n      // Reset all dates\n      setStartDate('');\n      setEndDate('');\n      return;\n    }\n    const { start, end } = getDateRangeFromQuickFilter(filterType);\n    setStartDate(start);\n    setEndDate(end);\n  };\n\n  // Reset all filters\n  const resetAllFilters = () => {\n    setSearchTerm('');\n    setStartDate('');\n    setEndDate('');\n    setQuickDateFilter('');\n    setDateFilterType('contractSigningDate');\n    setShowDateFilters(false);\n  };\n\n  useEffect(() => {\n    fetchContracts(currentPage);\n    fetchLoans();\n  }, [currentPage, pageSize]);\n\n  const handlePageChange = (newPage) => {\n    if (newPage > 0 && newPage <= totalPages) {\n      setCurrentPage(newPage);\n    }\n  };\n\n  const handleEdit = (id) => setShowEditContract(id);\n  const handleRevenue = (id) => setShowAddRevenue(id);\n  const handleDelete = async (id) => {\n    if (window.confirm('هل أنت متأكد أنك تريد حذف هذا العقد؟')) {\n      try {\n        await api.delete(`/Contracts/DeleteContract/${id}`);\n        fetchContracts(currentPage);\n        toast({ title: 'تم الحذف بنجاح', description: '' });\n      } catch {\n        alert('حدث خطأ أثناء حذف العقد.');\n      }\n    }\n  };\n\n  const handleDeleteDoc = async (id) => {\n    if (window.confirm('هل أنت متأكد أنك تريد حذف هذا المستند')) {\n      try {\n        await api.delete(`/Contracts/DeleteContractDocument/${id}`);\n        fetchContracts(currentPage);\n        toast({ title: 'تم الحذف بنجاح', description: '' });\n      } catch {\n        alert('حدث خطأ أثناء حذف العقد.');\n      }\n    }\n  };\n\n  const filteredContracts = contracts.filter((contract) => {\n    const matchesSearch =\n      (contract.contractNumber?.toString() ?? '').includes(searchTerm.toLowerCase()) ||\n      (contract.contractName?.toLowerCase() ?? '').includes(searchTerm.toLowerCase()) ||\n      (contract.companyName?.toLowerCase() ?? '').includes(searchTerm.toLowerCase()) ||\n      (contract.durationInDays?.toString() ?? '').includes(searchTerm.toLowerCase()) ||\n  (contract.contractAmount?.toString() ?? '').includes(searchTerm.toLowerCase()) ||\n      (getContractTypeLabel(contract.contractType)?.toLowerCase() ?? '').includes(searchTerm)||\n      (getStateTypeLabel(contract.status)?.toLowerCase() ?? '').includes(searchTerm)||\n\n      getLoanNameById(contract.loanId).toLowerCase().includes(searchTerm.toLowerCase());\n\n    // Use the selected date field for filtering\n    const contractDate = new Date(contract[dateFilterType]);\n    const start = startDate ? new Date(startDate) : null;\n    const end = endDate ? new Date(endDate) : null;\n\n    const isInRange =\n      (!start || contractDate >= start) &&\n      (!end || contractDate <= end);\n\n    return matchesSearch && isInRange;\n  });\n\n  return (\n    <>\n      <NavMenu />\n      <div className=\"contracts-container\"> \n        <div className=\"dashboard-cards\">\n          <div className=\"fss\">\n            <div>العقود المنجزة: {filteredContracts.filter((c) => c.status == 2).length} من أصل {filteredContracts.length}</div>\n            <div>العقود المستمرة: {filteredContracts.filter((c) => c.status == 1).length} من أصل {filteredContracts.length}</div>\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n              <img src=\"/Images/checked.png\" alt=\"\" width=\"50px\" height=\"50px\" />\n            </div>\n          </div>\n\n          <div className=\"fss\">\n            <div>العقود الاستشارية: {filteredContracts.filter((c) => c.contractType == 1).length} من أصل {filteredContracts.length}</div>\n            <div>العقود التجهيزية: {filteredContracts.filter((c) => c.contractType == 2).length} من أصل {filteredContracts.length}</div>\n            <div>عقود الاعمال: {filteredContracts.filter((c) => c.contractType == 3).length} من أصل {filteredContracts.length}</div>\n            <div>عقود اخرى: {filteredContracts.filter((c) => c.contractType == 4).length} من أصل {filteredContracts.length}</div>\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n              <img src=\"/Images/statistics.png\" alt=\"\" width=\"50px\" height=\"50px\" />\n            </div>\n          </div>\n          \n          <div className=\"fss\">\n            {loans.map((loan) => {\n              const loanId = loan.id || loan.ID;\n              const loanName = loan.loanName || loan.name || 'قرض غير معروف';\n              const count = filteredContracts.filter((c) => c.loanId == loanId).length;\n              return (\n                <div key={loanId}>\n                  <div>{loanName}: {count} عقد</div>\n                </div>\n              );\n            })}\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n              <img src=\"/Images/list.png\" alt=\"\" width=\"50px\" height=\"50px\" />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"d-flex flex-wrap justify-content-around align-items-start p-2 gap-1\">\n          {error && <p className=\"error\">{error}</p>}\n\n          <button className=\"btn btn-success\" onClick={() => setShowAddContract(true)}>\n              اضافة عقد <img src=\"/Images/notes.png\" alt=\"\" width=\"30px\" height=\"30px\" />\n          </button>\n\n          <div className=\"search-container\">\n            <input\n              type=\"text\"\n              className=\"search-input\"\n              placeholder=\"البحث في العقود...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            <img src=\"/Images/search.png\" alt=\"\" className=\"search-icon\" />\n          </div>\n\n          <div className=\"d-flex gap-2\">\n            <button\n              className=\"btn btn-outline-secondary\"\n              onClick={() => setShowDateFilters(!showDateFilters)}\n            >\n              <img src=\"/Images/calendar.png\" alt=\"\" width=\"20px\" height=\"20px\" className=\"m-1\" />\n              {showDateFilters ? 'إخفاء تصفية التاريخ' : 'تصفية حسب التاريخ'}\n            </button>\n            \n            <button\n              className=\"btn btn-outline-warning\"\n              onClick={resetAllFilters}\n              title=\"إعادة تعيين جميع الفلاتر\"\n            >\n              <img src=\"/Images/reload.png\" alt=\"\" width=\"20px\" height=\"20px\" className=\"m-1\" />\n              إعادة تعيين\n            </button>\n          </div>\n<div className=\"dropdown mb-2\">\n  <button className=\"btn btn-outline-primary dropdown-toggle\" type=\"button\" data-bs-toggle=\"dropdown\">\n    تخصيص الأعمدة\n  </button>\n  <ul className=\"dropdown-menu p-2\" style={{ maxHeight: '300px', overflowY: 'auto' }}>\n    {columns.map((col, idx) => (\n      <li key={col.key} className=\"form-check\">\n        <input\n          className=\"form-check-input\"\n          type=\"checkbox\"\n          id={`col-${col.key}`}\n          checked={col.visible}\n          onChange={() => {\n            const updated = [...columns];\n            updated[idx].visible = !updated[idx].visible;\n            setColumns(updated);\n          }}\n        />\n        <label className=\"form-check-label\" htmlFor={`col-${col.key}`}>\n          {col.label}\n        </label>\n      </li>\n    ))}\n  </ul>\n</div>\n<button onClick={printReport} className=\"btn btn-outline-secondary mb-3 mx-3\">\n  طباعة التقرير\n</button>\n          {showDateFilters && (\n            <div className=\"date-filters-container bg-light p-3 rounded border w-100\">\n              <div className=\"row\">\n                <div className=\"col-md-6\">\n                  <label className=\"form-label fw-bold\">نوع التاريخ للتصفية:</label>\n                  <select\n                    className=\"form-select\"\n                    value={dateFilterType}\n                    onChange={(e) => setDateFilterType(e.target.value)}\n                  >\n                    <option value=\"contractSigningDate\">تاريخ توقيع العقد</option>\n                    <option value=\"startDate\">تاريخ مباشرة العقد</option>\n                  </select>\n                </div>\n                \n                <div className=\"col-md-6\">\n                  <label className=\"form-label fw-bold\">تصفية سريعة:</label>\n                  <select\n                    className=\"form-select\"\n                    value={quickDateFilter}\n                    onChange={(e) => handleQuickDateFilterChange(e.target.value)}\n                  >\n                    {QUICK_DATE_FILTERS.map((filter) => (\n                      <option key={filter.value} value={filter.value}>\n                        {filter.label}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n\n              {(quickDateFilter === 'custom' || quickDateFilter === '') && (\n                <div className=\"row mt-3\">\n                  <div className=\"col-md-6\">\n                    <label className=\"form-label fw-bold\">من تاريخ:</label>\n                    <input\n                      type=\"date\"\n                      className=\"form-control\"\n                      value={startDate}\n                      onChange={(e) => {\n                        setStartDate(e.target.value);\n                        setQuickDateFilter('custom');\n                      }}\n                    />\n                  </div>\n                  \n                  <div className=\"col-md-6\">\n                    <label className=\"form-label fw-bold\">إلى تاريخ:</label>\n                    <input\n                      type=\"date\"\n                      className=\"form-control\"\n                      value={endDate}\n                      onChange={(e) => {\n                        setEndDate(e.target.value);\n                        setQuickDateFilter('custom');\n                      }}\n                    />\n                  </div>\n                </div>\n              )}\n\n              {(startDate || endDate) && (\n                <div className=\"row mt-3\">\n                  <div className=\"col-12\">\n                    <div className=\"alert alert-info mb-0\">\n                      <strong>التصفية الحالية:</strong> \n                      {startDate && ` من ${startDate}`}\n                      {endDate && ` إلى ${endDate}`}\n                      {` (${dateFilterType === 'contractSigningDate' ? 'تاريخ التوقيع' : 'تاريخ المباشرة'})`}\n                      <span className=\"ms-2\">\n                        عدد العقود المطابقة: <strong>{filteredContracts.length}</strong>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          <div className=\"col-md-2\">\n            <select\n              name=\"ContractType\"\n              className=\"form-control\"\n              value={pageSize}\n              onChange={(e) => {\n                setPageSize(e.target.value);\n                setCurrentPage(1);\n              }}\n            >\n              <option value={10}>10 عقود (من أصل {totalContractsCount} عقد)</option>\n              <option value={20}>20 عقد (من أصل {totalContractsCount} عقد)</option>\n              <option value={30}>30 عقد (من أصل {totalContractsCount} عقد)</option>\n              <option value={40}>40 عقد (من أصل {totalContractsCount} عقد)</option>\n              <option value={50}>50 عقد (من أصل {totalContractsCount} عقد)</option>\n              <option value={100}>100 عقد (من أصل {totalContractsCount} عقد)</option>\n            </select>\n          </div>\n        </div>\n\n        <table className=\"contracts-table table-responsive\" id=\"print-area\">\n\n          <thead>\n  <tr>\n    {columns.map(\n      (col) => col.visible && <th key={col.key}>{col.label}</th>\n    )}\n  </tr>\n</thead>\n<tbody>\n  {filteredContracts.map((c) => (\n    <tr key={c.id}>\n      {columns.map((col) => {\n        if (!col.visible) return null;\n\n        switch (col.key) {\n          case 'contractType':\n            return <td key={col.key}>{getContractTypeLabel(c.contractType)}</td>;\n          case 'status':\n            return <td key={col.key}>{getStateTypeLabel(c.status)}</td>;\n          case 'loanId':\n            return <td key={col.key}>{getLoanNameById(c.loanId)}</td>;\n          case 'contractSigningDate':\n          case 'startDate':\n            return <td key={col.key}>{c[col.key]?.slice(0, 10)}</td>;\n          case 'actions':\n            return (\n              <td key={col.key}>\n<OverlayTrigger placement=\"top\" overlay={<Tooltip>اضافة الوثائق</Tooltip>}>\n                    <button\n                      className=\"btn btn-warning mx-2 btn-sm me-0\"\n                      onClick={() => {\n                        setSelectedContractId(c.id);\n                        setShowUploadModal(true);\n                      }}\n                    >\n                      <img src=\"/Images/folder.png\" alt=\"\" width=\"15px\" height=\"15px\" />\n                    </button>\n                  </OverlayTrigger>\n                  <OverlayTrigger placement=\"top\" overlay={<Tooltip>عرض</Tooltip>}>\n                    <button className=\"btn btn-info btn-sm me-0\" onClick={() => {\n                      setSelectedContract(c);\n                      fetchDocuments(c.id);\n                      setShowModal(true);\n                    }}>\n                      <img src=\"/Images/eye-care.png\" alt=\"\" width=\"15px\" height=\"15px\" />\n                    </button>\n                  </OverlayTrigger>\n                  <OverlayTrigger placement=\"top\" overlay={<Tooltip>تعديل</Tooltip>}>\n                    <button className=\"btn btn-outline-primary btn-sm me-1\" onClick={() => handleEdit(c.id)}>\n                      <img src=\"/Images/edit.png\" alt=\"\" width=\"15px\" height=\"15px\" />\n                    </button>\n                  </OverlayTrigger>\n                  <OverlayTrigger placement=\"top\" overlay={<Tooltip>حذف</Tooltip>}>\n                    <button className=\"btn btn-danger mx-2 btn-sm me-1\" onClick={() => handleDelete(c.id)}>\n                      <img src=\"/Images/trash.png\" alt=\"\" width=\"15px\" height=\"15px\" />\n                    </button>\n                  </OverlayTrigger>\n                  <OverlayTrigger placement=\"top\" overlay={<Tooltip>البيانات المالية</Tooltip>}>\n                    <button className=\"btn btn-success mx-2 btn-sm me-1\" onClick={() => handleRevenue(c.id)}>\n                      <img src=\"/Images/increase.png\" alt=\"\" width=\"15px\" height=\"15px\" />\n                    </button>\n                  </OverlayTrigger>\n              </td>\n            );\n          default:\n            return <td key={col.key}>{c[col.key]}</td>;\n        }\n      })}\n    </tr>\n  ))}\n</tbody>\n\n        </table>\n\n        {pageSize !== '' && (\n          <div className=\"pagination\">\n            <button onClick={() => handlePageChange(currentPage - 1)} disabled={currentPage === 1}>\n              <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                <img src=\"/Images/next.png\" alt=\"\" width=\"50px\" height=\"50px\" />\n              </div>\n            </button>\n            <span>الصفحة {currentPage} من {totalPages}</span>\n            <button onClick={() => handlePageChange(currentPage + 1)} disabled={currentPage === totalPages}>\n              <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                <img src=\"/Images/previous.png\" alt=\"\" width=\"50px\" height=\"50px\" />\n              </div>\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Modal for viewing contract details */}\n      {showModal && selectedContract && (\n<div className=\"modal fade show d-block\" tabIndex=\"-1\" role=\"dialog\" onClick={() => setShowModal(false)}>\n  <div className=\"modal-dialog modal-lg\" role=\"document\" onClick={(e) => e.stopPropagation()}>\n\n            <div className=\"modal-content\" >\n              <div className=\"modal-header\">\n                <h5 className=\"modal-title\">تفاصيل العقد</h5>\n              </div>\n              <div className=\"modal-body\" >\n                <p><strong>رقم العقد:</strong> {selectedContract.contractNumber}</p>\n                <p><strong>اسم العقد:</strong> {selectedContract.contractName}</p>\n                <p><strong>الشركة:</strong> {selectedContract.companyName}</p>\n                <p><strong>نوع العقد:</strong> {CONTRACT_TYPES.find(t => t.id === selectedContract.contractType)?.label || 'غير معروف'}</p>\n                <p><strong>حالة العقد:</strong> {STATE_TYPES.find(s => s.id === selectedContract.status)?.Status || 'غير معروف'}</p>\n                <p><strong>المدة المطلوبة:</strong> {selectedContract.durationInDays} يوم</p>\n                <p><strong>القرض المرتبط:</strong> {getLoanNameById(selectedContract.loanId)}</p>\n                <p><strong>المدة المضافة:</strong> {selectedContract.addedDays}</p>\n                <p><strong>تاريخ التوقيع:</strong> {selectedContract.contractSigningDate?.slice(0, 10)}</p>\n                <p><strong>تاريخ المباشرة:</strong> {selectedContract.startDate?.slice(0, 10)}</p>\n                <p><strong>مبلغ العقد:</strong> {selectedContract.contractAmount}</p>\n                <p><strong>ملاحظات:</strong> {selectedContract.notes}</p>\n                <hr />\n                <h5>الوثائق المرفقة:</h5>\n                {contractDocuments.length > 0 ? (\n                  <ul>\n                    {contractDocuments.map((doc) => (\n                      <li key={doc.id}>\n                        <NavLink\n                          to={`http://localhost:5109${doc.filePath}`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                        >\n                          📄 {doc.fileName}\n                        </NavLink>\n                                          <OverlayTrigger placement=\"top\" overlay={<Tooltip>حذف</Tooltip>}>\n                    <button className=\"btn btn-danger mx-2 btn-sm me-1\" onClick={() => handleDeleteDoc(doc.id)}>\n                      <img src=\"/Images/trash.png\" alt=\"\" width=\"15px\" height=\"15px\" />\n                    </button>\n                  </OverlayTrigger>\n                      </li>\n                    ))}\n                  </ul>\n                ) : (\n                  <p>لا توجد وثائق مرفقة لهذا العقد.</p>\n                )}\n              </div>\n              <div className=\"modal-footer\">\n                <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setShowModal(false)}>إغلاق</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      {showAddContract && (\n        <div className=\"modal-backdrop\" onClick={() => setShowAddContract(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n\n            <AddContract \n              onClose={() => handleCancel()} \n            />\n          </div>\n        </div>\n      )}\n\n      {/* Modal for uploading documents */}\n      {showUploadModal && (\n<div className=\"modal fade show d-block\" tabIndex=\"-1\" role=\"dialog\" onClick={() => setShowUploadModal(false)}>\n  <div className=\"modal-dialog modal-lg\" role=\"document\" onClick={(e) => e.stopPropagation()}>\n\n            <div className=\"modal-content\"  >\n              <div className=\"modal-header\">\n                <h5 className=\"modal-title\">إرفاق وثائق للعقد ذو التسلسل {selectedContractId}</h5>\n                <button type=\"button\" className=\"btn-close\" onClick={() => setShowUploadModal(false)}></button>\n              </div>\n              <div className=\"modal-body\">\n                <input\n                  type=\"file\"\n                  multiple\n                  onChange={(e) => setSelectedFiles([...e.target.files])}\n                  className=\"form-control\"\n                />\n              </div>\n              <div className=\"modal-footer\">\n                <button\n                  className=\"btn btn-primary\"\n                  onClick={async () => {\n                    if (selectedFiles.length === 0) {\n                      toast({ title: 'تنبيه', description: 'يرجى اختيار ملفات أولاً' });\n                      return;\n                    }\n                    const formData = new FormData();\n                    selectedFiles.forEach((file) => formData.append('Files', file));\n                    formData.append('ContractId', selectedContractId);\n\n                    try {\n                      await api.post('/Contracts/UploadContractDocuments', formData, {\n                        headers: { 'Content-Type': 'multipart/form-data' },\n                      });\n                      toast({ title: 'تم الرفع', description: 'تم رفع الوثائق بنجاح' });\n                      setShowUploadModal(false);\n                      setSelectedFiles([]);\n                    } catch (error) {\n                      toast({ title: 'خطأ', description: 'فشل في رفع الوثائق' });\n                    }\n                  }}\n                >\n                  رفع الوثائق\n                </button>\n                <button className=\"btn btn-secondary\" onClick={() => setShowUploadModal(false)}>\n                  إغلاق\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      \n{showEditContract && (\n        <div className=\"modal-backdrop\" onClick={() => setShowEditContract(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <button\n              className=\"btn btn-danger btn-sm\"\n              onClick={() => setShowEditContract(false)}\n            >\n              إغلاق\n            </button>\n            <EditContract\n              contractId={showEditContract}\n              onClose={() => handleCancel()}\n            />\n          </div>\n        </div>\n      )}\n\n      {showAddRevenue && (\n        <div className=\"modal-backdrop\" onClick={() => setShowAddRevenue(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <button\n              className=\"btn btn-danger btn-sm\"\n              onClick={() => setShowAddRevenue(false)}\n            >\n              إغلاق\n            </button>\n            <AddRevenue\n              contractId={showAddRevenue}\n              onClose={() => handleCancel()}\n            />\n          </div>\n        </div>\n      )}\n\n      <Footer />\n    </>\n  );\n}","import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport api from '../Api/AxiosClient';\nimport NavMenu from './NavMenu';\nimport Footer from './Footer';\nimport '../Style/AddContract.css';\nimport { toast as toastify } from 'react-toastify';\n\nconst CONTRACT_TYPES = [\n  { id: '1', label: 'استشاري' },\n  { id: '2', label: 'تجهيز' },\n  { id: '3', label: 'اعمال' },\n  { id: '4', label: 'اخرى' }\n];\nconst State_TYPES = [\n  { id: '1', Status: 'مستمر' },\n  { id: '2', Status: 'منجز' },\n];\n\nconst toast = ({ title, description }) => {\n  toastify(\n    <div>\n      <strong>{title}</strong>\n      <div>{description}</div>\n    </div>,\n    {\n      position: 'top-right',\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n    }\n  );\n};\n\nexport default function EditContract({ contractId, onClose  }) {\n  const navigate = useNavigate();\n  // const { id } = useParams();\n  const id = contractId;\n  const isEditMode = Boolean(id);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  const [loans, setLoans] = useState([]);\n  const [loansLoading, setLoansLoading] = useState(false);\n  const [loansError, setLoansError] = useState('');\n\n  const [formData, setFormData] = useState({\n  ContractNumber: '',\n  ContractName: '',\n  ContractType: '',\n  CompanyName: '',\n  Status: '',\n  LoanId: '',\n  ContractSigningDate: '',\n  StartDate: '',\n  CompleteDate: '',\n  DurationInDays: '',\n  AddedDays: '',\n  ContractAmount: '',\n  CostPlanMins: '',\n  CostAfterChange: '',\n  CostToNatiBank: '',\n  TotalCostPaid: '',\n  OperationLoanCost: '',\n  CashPaid: '',\n  TaxesAndBlockedmoney: '',\n  PrivateMoneyPaid: '',\n  Notes: '',\n\n  // ✅ الحقول الجديدة\n  InsuranceDeposits: '',\n  TaxTrusts: '',\n  Penalties: '',\n  OtherTrusts: ''\n});\n\n\n  const [validationErrors, setValidationErrors] = useState({});\n\n  // Helper function to get loan name by ID\n  const getLoanNameById = (loanId) => {\n    if (!loanId || !loans.length) return '';\n    const loan = loans.find(loan => (loan.id || loan.ID) == loanId);\n    return loan ? (loan.loanName || loan.LoanName || loan.name || loan.Name) : '';\n  };\n\n  // Fetch loans & contract data if editing\n  useEffect(() => {\n    const fetchLoans = async () => {\n      setLoansLoading(true);\n      try {\n        const response = await api.get('/Loan/GetAllLoans');\n        setLoans(response.data?.loans || []);\n\n      } catch (err) {\n        setLoansError('فشل تحميل قائمة القروض');\n        console.error('Error fetching loans:', err);\n      } finally {\n        setLoansLoading(false);\n      }\n    };\n\n    const fetchContract = async () => {\n      if (!isEditMode) return;\n\n      setIsLoading(true);\n      try {\n        const response = await api.get(`/Contracts/GetContract/${id}`);\n        let contractData;\n\n        if (response.data?.data) contractData = response.data.data;\n        else if (response.data?.contract) contractData = response.data.contract;\n        else contractData = response.data;\n\n        if (!contractData || Object.keys(contractData).length === 0) {\n          throw new Error('No contract data was returned from the API');\n        }\n\n        // Normalize keys (case insensitive)\n        const normalizedData = {};\n        Object.keys(formData).forEach((key) => {\n          const matchKey = Object.keys(contractData).find(\n            (k) => k.toLowerCase() === key.toLowerCase()\n          );\n          if (matchKey) normalizedData[key] = contractData[matchKey];\n        });\n\n        // Format date fields for date inputs\n        ['ContractSigningDate', 'StartDate', 'CompleteDate'].forEach((dateField) => {\n          if (normalizedData[dateField]) {\n            const d = new Date(normalizedData[dateField]);\n            if (!isNaN(d)) normalizedData[dateField] = d.toISOString().split('T')[0];\n          }\n        });\n\n        setFormData((prev) => ({ ...prev, ...normalizedData }));\n      } catch (err) {\n        setError(err.response?.data?.message || err.message || 'فشل تحميل بيانات العقد.');\n        console.error('Error fetching contract:', err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchLoans();\n    fetchContract();\n  }, [id, isEditMode]);\n\n  // Handle input change & clear validation error for the field\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n\n    if (validationErrors[name]) {\n      setValidationErrors((prev) => ({ ...prev, [name]: '' }));\n    }\n     setFormData((prev) => ({\n    ...prev,\n    [name]: [ 'ContractType'].includes(name) ? Number(value) : value,\n  }));\n    \n  };\n\n  // Form validation\n  const validateForm = () => {\n    const errors = {};\n\n    if (!formData.ContractNumber.trim()) errors.ContractNumber = 'رقم العقد مطلوب';\n    if (!formData.ContractName.trim()) errors.ContractName = 'اسم العقد مطلوب';\n\n    // Numeric fields validation (should be numbers >= 0)\n    const numericFields = [\n  'ContractAmount',\n  'CostPlanMins',\n  'CostAfterChange',\n  'CostToNatiBank',\n  'TotalCostPaid',\n  'OperationLoanCost',\n  'CashPaid',\n  'TaxesAndBlockedmoney',\n  'PrivateMoneyPaid',\n  'DurationInDays',\n  'AddedDays',\n\n  // ✅ الحقول الجديدة\n  'InsuranceDeposits',\n  'TaxTrusts',\n  'Penalties',\n  'OtherTrusts'\n];\n\n    numericFields.forEach((field) => {\n      if (formData[field] && (isNaN(Number(formData[field])) || Number(formData[field]) < 0)) {\n        errors[field] = 'يجب أن تكون القيمة رقمية وغير سالبة';\n      }\n    });\n\n    // Date validation\n    if (formData.StartDate && formData.CompleteDate) {\n      const start = new Date(formData.StartDate);\n      const complete = new Date(formData.CompleteDate);\n      if (start > complete) {\n        errors.CompleteDate = 'تاريخ الإنجاز يجب أن يكون بعد تاريخ المباشرة';\n      }\n    }\n\n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    if (!validateForm()) {\n      setError('يرجى تصحيح الأخطاء في النموذج قبل الإرسال.');\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      if (isEditMode) {\n        await api.put(`/Contracts/UpdateContract/${id}`, formData);\n        const loanName = getLoanNameById(formData.LoanId);\n        toast({\n          title: 'تمت التعديل بنجاح',\n          description: `${formData.ContractName} تمت تعديل العقد باسم الشركة ${formData.CompanyName}${loanName ? ` - القرض: ${loanName}` : ''}`,\n        });\n        setSuccess('تم تحديث العقد بنجاح!');\n            onClose(true);  \n\n      } else {\n        const response = await api.post('/Contracts/AddContract', formData);\n        setSuccess('تم إضافة العقد بنجاح!');\n        if (response.data?.id) {\n          setTimeout(() => navigate(`/EditContract/${response.data.id}`), 1500);\n              onClose(true);  \n\n        }\n        \n      }\n    } catch (err) {\n      console.error('Error saving contract:', err);\n      setError(\n        err.response?.status === 401\n          ? 'غير مصرح - الرجاء تسجيل الدخول.'\n          : err.response?.data?.message || 'حدث خطأ أثناء حفظ العقد.'\n      );\n    } finally {\n      setIsSaving(false);\n      \n    }\n  };\n\n  const handleCancel = () => onClose();\n\n  // Input renderer helper\n  const renderInput = (label, name, type = 'text', required = false) => (\n    <div className=\"col-md-4 mb-3\">\n      <label className=\"form-label\">\n        {label} {required && <span className=\"text-danger\">*</span>}\n      </label>\n      <input\n        type={type}\n        name={name}\n        className={`form-control ${validationErrors[name] ? 'is-invalid' : ''}`}\n        value={formData[name] ?? ''}\n        onChange={handleChange}\n        required={required}\n      />\n      {validationErrors[name] && <div className=\"invalid-feedback\">{validationErrors[name]}</div>}\n    </div>\n  );\n\n  if (isLoading)\n    return (\n      <div className=\"d-flex flex-column min-vh-100\">\n        <NavMenu />\n        <main className=\"flex-fill container my-4 text-center\">\n          <div className=\"spinner-border text-primary\" role=\"status\">\n            <span className=\"visually-hidden\">جاري التحميل...</span>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n\n  return (\n    <div className=\"d-flex flex-column min-vh-100\">\n      {/* <NavMenu /> */}\n      <main className=\"flex-fill container my-4\">\n        <div className=\"card contract-form-container\">\n          <div className=\"card-header d-flex justify-content-between align-items-center\">\n            <h2 className=\"mb-0\">{isEditMode ? 'تعديل عقد' : 'إضافة عقد جديد'}</h2>\n\n          </div>\n          <div className=\"card-body\">\n            {error && <div className=\"alert alert-danger\">{error}</div>}\n            {success && <div className=\"alert alert-success\">{success}</div>}\n\n            <form onSubmit={handleSubmit} noValidate>\n              <div className=\"row\">\n                {renderInput('رقم العقد', 'ContractNumber', 'text', true)}\n                {renderInput('اسم العقد', 'ContractName', 'text', true)}\n\n                <div className=\"col-md-4 mb-3\">\n                  <label className=\"form-label\">نوع العقد</label>\n                  <select\n                    name=\"ContractType\"\n                    className=\"form-select\"\n                    value={formData.ContractType}\n                    onChange={handleChange}\n                    \n                  >\n                    \n                    <option value=\"\">-- اختر نوع العقد --</option>\n                    {CONTRACT_TYPES.map(({ id, label }) => (\n                      <option key={id} value={id}>\n                        {label}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {renderInput('اسم الشركة', 'CompanyName')}\n                                <div className=\"col-md-4 mb-3\">\n                  <label className=\"form-label\">حالة العقد</label>\n                  <select\n                    name=\"Status\"\n                    className=\"form-select\"\n                    value={formData.Status}\n                    onChange={handleChange}\n                  >\n                    <option value=\"\">-- اختر حالة العقد --</option>\n                    {State_TYPES.map(({ id, Status }) => (\n                      <option key={id} value={id}>\n                        {Status}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                \n                <div className=\"col-md-4 mb-3\">\n                  <label className=\"form-label\">القرض</label>\n                  <select\n                    name=\"LoanId\"\n                    className=\"form-select\"\n                    value={formData.LoanId}\n                    onChange={handleChange}\n                    disabled={loansLoading}\n                  >\n                    <option value=\"\">-- اختر القرض --</option>\n                    {loans.map((loan) => (\n                      <option key={loan.id || loan.ID} value={loan.id || loan.ID}>\n                        {loan.loanName || loan.LoanName || loan.name || loan.Name}\n                      </option>\n                    ))}\n                  </select>\n                  {loansError && <small className=\"text-danger\">{loansError}</small>}\n                  {/* Display selected loan name */}\n                  {formData.LoanId && (\n                    <small className=\"text-muted d-block mt-1\">\n                      القرض المختار: {getLoanNameById(formData.LoanId)}\n                    </small>\n                  )}\n                </div>\n\n                {renderInput('تاريخ توقيع العقد', 'ContractSigningDate', 'date')}\n                {renderInput('تاريخ المباشرة', 'StartDate', 'date')}\n                {renderInput('تاريخ الإنجاز', 'CompleteDate', 'date')}\n                {renderInput('مدة العقد بالأيام', 'DurationInDays', 'number')}\n                {renderInput('الأيام المضافة', 'AddedDays', 'number')}\n                {renderInput('مبلغ العقد', 'ContractAmount', 'number')}\n                <div className=\"col-12 mb-3\">\n                  <label className=\"form-label\">ملاحظات</label>\n                  <textarea\n                    name=\"Notes\"\n                    className=\"form-control\"\n                    rows=\"3\"\n                    value={formData.Notes}\n                    onChange={handleChange}\n                  />\n                </div>\n              </div>\n\n              <div className=\"d-flex justify-content-between mt-4\">\n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary\"\n                  disabled={isSaving}\n                                    onClick={() => {\n                    navigate('/contracts');\n                  }}\n                >\n                  {isSaving ? 'جاري الحفظ...' : 'حفظ'}\n                </button>\n                <button\n                  type=\"button\"\n                  className=\"btn btn-secondary\"\n                  onClick={handleCancel}\n                  disabled={isSaving}\n                >\n                  إلغاء\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n}","import { useEffect, useState } from 'react';\nimport api from '../Api/AxiosClient';\nimport NavMenu from './NavMenu';\nimport Footer from './Footer';\nimport '../Style/AddContract.css';\nimport { toast as toastify } from 'react-toastify';\nimport { useNavigate } from 'react-router-dom';\n  const initialState = {\n    ContractNumber: '',ContractName: '',\n    ContractType: null,\n    CompanyName: '',\n    Status: '',\n    LoanId: null,\n    ContractSigningDate: null,\n    StartDate: null,\n    CompleteDate: null,\n    DurationInDays: null,\n    AddedDays: null,\n    ContractAmount: null,\n    CostPlanMins: null,\n    CostAfterChange: null,\n    CostToNatiBank: null,\n    TotalCostPaid: null,\n    OperationLoanCost: null,\n    CashPaid: null,\n    TaxesAndBlockedmoney: null,\n    PrivateMoneyPaid: null,\n    Notes: '',\n    CostChange: null,\n  };\nexport default function AddContract({ onClose }) {\n\nconst navigate = useNavigate();\n  const numericFields = [\n    'ContractType',\n    'LoanId',\n    'DurationInDays',\n    'AddedDays',\n    'ContractAmount',\n    'CostPlanMins',\n    'CostAfterChange',\n    'CostToNatiBank',\n    'TotalCostPaid',\n    'OperationLoanCost',\n    'CashPaid',\n    'TaxesAndBlockedmoney',\n    'PrivateMoneyPaid',\n    'CostChange',\n  ];\n\n  const dateFields = ['ContractSigningDate', 'StartDate', 'CompleteDate'];\n\n  const [formData, setFormData] = useState(initialState);\n  const [status, setStatus] = useState({ loading: false, error: '', success: '' });\n  const [loading, setLoading] = useState(false);\n  const [loans, setLoans] = useState([]);\n  const [loanLoading, setLoanLoading] = useState(false);\n  const [loanError, setLoanError] = useState('');\n\n  useEffect(() => {\n    const fetchLoans = async () => {\n      setLoanLoading(true);\n      setLoanError('');  \n      try {\n        console.log('Fetching loans...');\n        const response = await api.get('/Loan/GetAllLoans', {\n          params: { page: 1, pageSize: 1000 },\n        });\n        const loansData = response.data?.loans ?? [];\n        setLoans(loansData);\n        if (loansData.length === 0) {\n          setLoanError('لا توجد قروض متاحة');\n        }\n      } catch (err) {\n        const errorMessage = err.response?.status === 401\n          ? 'غير مصرح – الرجاء تسجيل الدخول.'\n          : err.response?.data?.message || 'حدث خطأ أثناء جلب القروض.';\n        setLoanError(errorMessage);\n      } finally {\n        setLoanLoading(false);\n      }\n    };\n    fetchLoans();\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    let convertedValue = value;\n    if (numericFields.includes(name)) {\n      convertedValue = value === '' ? null : Number(value);\n      if (isNaN(convertedValue)) convertedValue = null;\n    } else if (dateFields.includes(name)) {\n      convertedValue = value === '' ? null : value;\n    }\n    setFormData((prev) => ({\n      ...prev,\n      [name]: convertedValue,\n    }));\n  };\n\n  const toast = ({ title, description }) => {\n    toastify(\n      <div>\n        <strong>{title}</strong>\n        <div>{description}</div>\n      </div>,\n      {\n        position: 'top-right',\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      }\n    );\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setStatus((prev) => ({ ...prev, error: '', success: '' }));\n    \n    if (formData.ContractAmount !== null && formData.ContractAmount < 0) {\n      setStatus((prev) => ({ ...prev, error: 'مبلغ العقد لا يمكن أن يكون سالباً.' }));\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await api.post('/Contracts/AddContract', formData);\n      setStatus((prev) => ({ ...prev, success: 'تم إضافة العقد بنجاح!' }));\n      toast({\n        title: 'تمت الإضافة بنجاح',\n        description: `تمت إضافة العقد ${formData.ContractName} للشركة ${formData.CompanyName || 'غير محدد'}`,\n      });\n      setFormData(initialState);\n    } catch (err) {\nconst errorMessage =\n  err?.response?.status === 401\n    ? 'غير مصرح – الرجاء تسجيل الدخول.'\n    : err?.response?.data?.message ||\n      err?.message ||\n      'فشل الاتصال بالخادم. حاول مرة أخرى.';\n\n    } finally {\n      setLoading(false);\n      if (onClose) onClose();\n    }\n  };\n\n  const getLoanDisplayName = (loan) => {\n    return loan.loanName || loan.LoanName || loan.name || loan.Name || loan.title || \n          loan.Title ||`قرض رقم ${loan.id || loan.Id}`;\n  };\n\n  return (\n    <div className=\"d-flex flex-column min-vh-100\">\n      <main className=\"flex-fill container my-4\">\n        <div className=\"contract-form-container\">\n          <h2 className=\"mb-4\">إضافة عقد جديد</h2>\n          {status.error && <div className=\"alert alert-danger\">{status.error}</div>}\n          {status.success && <div className=\"alert alert-success\">{status.success}</div>}\n          <form onSubmit={handleSubmit} className=\"row g-3\">\n            <div className=\"col-12\">\n              <h4 className=\"text-primary border-bottom pb-2\">المعلومات الأساسية</h4>\n            </div>\n\n            <div className=\"col\">\n              <label className=\"form-label\">رقم العقد <span className=\"text-danger\">*</span>:</label>\n              <input type=\"text\" name=\"ContractNumber\" required\n                className=\"form-control\" value={formData.ContractNumber}\n                onChange={handleChange} placeholder=\"أدخل رقم العقد\"\n              />\n            </div>\n            <div className=\"col\">\n              <label className=\"form-label\">اسم العقد <span className=\"text-danger\">*</span>:</label>\n              <input type=\"text\" name=\"ContractName\" className=\"form-control\"\n                value={formData.ContractName} onChange={handleChange} required\n                placeholder=\"أدخل اسم العقد\"\n              />\n            </div>\n            <div className=\"col-md-4\">\n              <label className=\"form-label\">نوع العقد:</label>\n              <select required name=\"ContractType\" className=\"form-control\"\n                value={formData.ContractType ?? ''} onChange={handleChange}\n              >\n                <option value=\"\">-- اختر نوع العقد --</option>\n                <option value={1}>استشاري (Mentor)</option>\n                <option value={2}>تجهيز (Equipment)</option>\n                <option value={3}>اعمال (Work)</option>\n                <option value={4}>اخرى (Others)</option>\n\n              </select>\n            </div>\n\n            <div className=\"col-md-4\">\n              <label className=\"form-label\">اسم الشركة:</label>\n              <input type=\"text\" name=\"CompanyName\" className=\"form-control\"\n                value={formData.CompanyName} onChange={handleChange} placeholder=\"أدخل اسم الشركة\"\n              />\n            </div>\n            <div className=\"col-md-4\">\n              <label className=\"form-label\">الحالة:</label>\n              <select type=\"text\" name=\"Status\" className=\"form-control\"\n                value={formData.Status} onChange={handleChange} placeholder=\"حالة العقد\">\n                <option value=\"\">-- اختر حالة العقد --</option>\n                <option value=\"1\">مستمر</option>\n                <option value=\"2\">منجز</option>\n                </select>\n            </div>\n            <div className=\"col\">\n              <label className=\"form-label\">اختر القرض المرتبط:</label>\n              {loanLoading ? (\n                <div className=\"form-control d-flex align-items-center\">\n                  <div className=\"spinner-border spinner-border-sm me-2\" role=\"status\"></div>\n                  جارٍ تحميل القروض...\n                </div>\n              ) : loanError ? (\n                <div>\n                  <div className=\"form-control text-danger\">{loanError}</div>\n                  <small className=\"text-muted\">تحقق من الاتصال بالخادم أو صلاحياتك</small>\n                </div>\n              ) : (\n                <>\n                  <select name=\"LoanId\" className=\"form-control\" value={formData.LoanId ?? ''} onChange={handleChange}\n                    required >\n                    <option value=\"\">-- اختر القرض --</option>\n                    {loans.map((loan) => (\n                      <option key={loan.id || loan.Id} value={loan.id || loan.Id}>\n                        {getLoanDisplayName(loan)}\n                      </option>\n                    ))}\n                  </select>\n                  {loans.length === 0 && (\n                    <small className=\"text-muted\">لا توجد قروض متاحة</small>\n                  )}\n                </>\n              )}\n            </div>\n            <div className=\"col\">\n              <label className=\"form-label\">مبلغ العقد:</label>\n              <input type=\"number\" name=\"ContractAmount\" className=\"form-control\"\n                value={formData.ContractAmount ?? ''} onChange={handleChange} required\n                min=\"0\" step=\"0.01\" placeholder=\"0.00\" />\n            </div>\n            <div className=\"col-12 mt-4\">\n              <h4 className=\"text-primary border-bottom pb-2\">التواريخ والمدد</h4>\n            </div>\n            <div className=\"col-md-4\">\n              <label className=\"form-label\">تاريخ توقيع العقد:</label>\n              <input\n                type=\"date\"\n                name=\"ContractSigningDate\"\n                className=\"form-control\"\n                value={formData.ContractSigningDate ?? ''}\n                onChange={handleChange}\n              />\n            </div>\n\n            {/* Start Date */}\n            <div className=\"col-md-4\">\n              <label className=\"form-label\">تاريخ المباشرة:</label>\n              <input\n                type=\"date\"\n                name=\"StartDate\"\n                className=\"form-control\"\n                value={formData.StartDate ?? ''}\n                onChange={handleChange}\n              />\n            </div>\n\n            {/* Complete Date */}\n            <div className=\"col-md-4\">\n              <label className=\"form-label\">تاريخ الإنجاز:</label>\n              <input\n                type=\"date\"\n                name=\"CompleteDate\"\n                className=\"form-control\"\n                value={formData.CompleteDate ?? ''}\n                onChange={handleChange}\n              />\n            </div>\n\n            {/* Duration In Days */}\n            <div className=\"col\">\n              <label className=\"form-label\">المدة المطلوبة (يوم):</label>\n              <input\n                type=\"number\"\n                name=\"DurationInDays\"\n                className=\"form-control\"\n                value={formData.DurationInDays ?? ''}\n                onChange={handleChange}\n                min=\"1\"\n                placeholder=\"عدد الأيام\"\n              />\n            </div>\n\n            {/* Added Days */}\n            <div className=\"col\">\n              <label className=\"form-label\">المدة المضافة (يوم):</label>\n              <input\n                type=\"number\"\n                name=\"AddedDays\"\n                className=\"form-control\"\n                value={formData.AddedDays ?? ''}\n                onChange={handleChange}\n                min=\"0\"\n                placeholder=\"الأيام الإضافية\"\n              />\n            </div>\n            <div className=\"col\">\n              <label className=\"form-label\">اوامر الغيار:</label>\n              <input type=\"number\" name=\"CostChange\" className=\"form-control\"\n                value={formData.CostChange ?? ''} onChange={handleChange} required\n                min=\"0\" step=\"0.01\" placeholder=\"0.00\" />\n            </div>\n            {/* Notes Section */}\n            <div className=\"col-12 mt-4\">\n              <h4 className=\"text-primary border-bottom pb-2\">ملاحظات إضافية</h4>\n            </div>\n\n            {/* Notes */}\n            <div className=\"col-12\">\n              <textarea\n                name=\"Notes\"\n                className=\"form-control\"\n                rows=\"4\"\n                value={formData.Notes}\n                onChange={handleChange}\n                placeholder=\"اكتب أي ملاحظات إضافية هنا...\"\n              />\n            </div>\n\n            {/* Submit button */}\n            <div className=\"col-12 mt-4\">\n              <div className=\"d-flex gap-3\">\n                <button \n                  type=\"submit\" \n                  className=\"btn btn-success btn-lg px-4\" \n                  disabled={loading}\n                  onClick={() => {\n                    // navigate('/contracts');\n                  }}\n                >\n                  {loading ? (\n                    <>\n                      <div className=\"spinner-border spinner-border-sm me-2\" role=\"status\"></div>\n                      جاري الإرسال...\n                    </>\n                  ) : (\n                    'إضافة العقد'\n                  )}\n                </button>\n                \n                <button \n                  type=\"button\" \n                  className=\"btn btn-secondary btn-lg px-4\"\n                  onClick={() => {\n                    setFormData(initialState);\n                    setStatus({ loading: false, error: '', success: '' });\n                    navigate('/contracts');\n                    if (onClose) onClose();\n                  }}\n                  disabled={loading}\n                >\n                  إلغاء / مسح\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}","import React from 'react';\nimport '../Style/Footer.css';\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap';\n\nexport default function Footer() {\n  const logoutTooltip = <Tooltip id=\"logout-tooltip\" className=\"custom-tooltip\">المبرمجين : مصطفى نجم - جيان حسين</Tooltip>;\n\n  return (\n    <OverlayTrigger placement=\"top\" className=\"custom-tooltip\"  overlay={logoutTooltip}>\n    \n    <footer className=\"page-footer\">\n      جميع الحقوق محفوظة © {new Date().getFullYear()} قسم تقنية المعلومات\n    </footer>\n    </OverlayTrigger>\n    \n  );\n}","import React, { useEffect, useState } from \"react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport \"../Style/NavStyle.css\";\n\nexport default function NavBar() {\n  const navigate = useNavigate();\n  const [username, setUsername] = useState(\"\");\n  const [UserDepartment, setUserDepartment] = useState(\"\");\n\n\n  useEffect(() => {\n    const storedUsername = localStorage.getItem(\"username\");\n    if (storedUsername) {\n      setUsername(storedUsername);\n    }\n\n    const storedUserDepartment = localStorage.getItem(\"UserDepartment\");\n    if (storedUserDepartment) {\n      setUserDepartment(storedUserDepartment);\n    }\n  }, []);\n\n  const handleLogout = async () => {\n    try {\n      await axios.post(\n        \"http://localhost:5109/Auth/logout\",\n        {},\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        }\n      );\n\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"roles\");\n      localStorage.removeItem(\"username\");\n\n      navigate(\"/\");\n    } catch (err) {\n      console.error(\"Logout failed:\", err);\n      alert(\"فشل تسجيل الخروج، حاول مرة أخرى.\");\n    }\n  };\n\n  const renderNavItem = (to, label) => (\n    <NavLink\n      to={to}\n      className={({ isActive }) =>\n        `text-decoration-none nav-link${isActive ? \" active-link\" : \"\"}`\n      }\n      end\n      aria-current=\"page\"\n    >\n      {label}\n    </NavLink>\n  );\n\n  return (\n    <nav\n      className=\"bg-custom d-flex justify-content-between flex-row-reverse p-3\"\n      aria-label=\"Primary navigation\"\n    >\n      <div className=\"fs-4 fw-bold hlogo\">\n        <NavLink to=\"/dashboard\" className=\"nav-brand-link\">\n          نظام المنح والقروض\n          <div style={{ display: 'flex', alignItems: 'center' ,justifyContent: 'center', margin:'0 10px' }}>\n          <img src=\"/Images/bank.png\" className=\"logo-shadow-rounded\" alt=\"\" width=\"50px\" height=\"50px\" /></div>\n\n        </NavLink>\n      </div>\n\n      <ul className=\"d-flex flex-row-reverse gap-3 list-unstyled mb-0 align-items-center fw-bold\">\n        <li>{renderNavItem(\"/dashboard\", \"الصفحة الرئيسية\")}</li>\n        <li>{renderNavItem(\"/contracts\", \" العقود\")}</li>\n        <li>{renderNavItem(\"/Loans\", \" القروض\")}</li>\n        <li>{renderNavItem(\"/RevenueList\", \" الايرادات\")}</li>\n        <li>{renderNavItem(\"/AdminPanel\", \"المستخدمين\")}</li>\n        {/* <li>{renderNavItem(\"/AdminDashboard\", \"لوحة التحكم\")}</li> */}\n      </ul>\n\n      <div className=\"d-flex align-items-center gap-2\">\n        <OverlayTrigger\n          placement=\"bottom\"\n          overlay={<Tooltip id=\"logout-tooltip\">تسجيل الخروج</Tooltip>}\n        >\n          <button\n            aria-label=\"تسجيل الخروج\"\n            className=\"btn btn-outline-danger logoutB\"\n            onClick={handleLogout}\n            type=\"button\"\n          >\n                    <span className=\"navbar-username\">{username.toUpperCase() }</span>\n\n\n            <img\n              className=\"PowImg\"\n              src=\"/Images/power.gif\"\n              alt=\"Power GIF\"\n              style={{ borderRadius: \"50%\" }}\n              width=\"20\"\n              height=\"20\"\n            />\n          </button>\n        </OverlayTrigger>\n<h6 className=\"headingDep\">{UserDepartment || \"لا يوجد قسم\"}</h6>\n                  <span className=\"navbar-username\">\n                              <NavLink to=\"/ChangePassword\" className=\"nav-brand-link\">\n\n                        تغيير كلمة المرور\n                      </NavLink>\n                    </span>\n      </div>\n    </nav>\n  );\n}\n"],"names":["ContractsList","_CONTRACT_TYPES$find2","_STATE_TYPES$find2","_selectedContract$con","_selectedContract$sta","contracts","setContracts","useState","loans","setLoans","error","setError","currentPage","setCurrentPage","pageSize","setPageSize","totalPages","setTotalPages","totalContractsCount","setTotalContractsCount","searchTerm","setSearchTerm","showModal","setShowModal","selectedContract","setSelectedContract","showUploadModal","setShowUploadModal","selectedContractId","setSelectedContractId","selectedFiles","setSelectedFiles","contractDocuments","setContractDocuments","showAddContract","setShowAddContract","showEditContract","setShowEditContract","showAddRevenue","setShowAddRevenue","startDate","setStartDate","endDate","setEndDate","showDateFilters","setShowDateFilters","dateFilterType","setDateFilterType","quickDateFilter","setQuickDateFilter","CONTRACT_TYPES","id","label","STATE_TYPES","Status","columns","setColumns","key","visible","getContractTypeLabel","_CONTRACT_TYPES$find$","_CONTRACT_TYPES$find","find","type","getStateTypeLabel","_STATE_TYPES$find$Sta","_STATE_TYPES$find","handleCancel","fetchContracts","fetchLoans","getLoanNameById","loanId","length","loan","ID","loanName","name","async","size","parseInt","res","api","get","page","data","totalCount","Math","ceil","err","_response$data","response","console","toast","_ref","title","description","toastify","_jsxs","children","_jsx","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","handleQuickDateFilterChange","filterType","start","end","today","Date","todayStr","toISOString","split","yesterday","setDate","getDate","yesterdayStr","startOfWeek","getDay","endOfWeek","lastWeekStart","lastWeekEnd","firstDayOfMonth","getFullYear","getMonth","lastDayOfMonth","firstDayOfLastMonth","lastDayOfLastMonth","firstDayOfYear","lastDayOfYear","firstDayOfLastYear","lastDayOfLastYear","getDateRangeFromQuickFilter","useEffect","handlePageChange","newPage","filteredContracts","filter","contract","_contract$contractNum","_contract$contractNum2","_contract$contractNam","_contract$contractNam2","_contract$companyName","_contract$companyName2","_contract$durationInD","_contract$durationInD2","_contract$contractAmo","_contract$contractAmo2","_getContractTypeLabel","_getContractTypeLabel2","_getStateTypeLabel$to","_getStateTypeLabel","matchesSearch","contractNumber","toString","includes","toLowerCase","contractName","companyName","durationInDays","contractAmount","contractType","status","contractDate","_Fragment","NavMenu","className","c","style","display","alignItems","justifyContent","src","alt","width","height","map","count","onClick","placeholder","value","onChange","e","target","resetAllFilters","maxHeight","overflowY","col","idx","checked","updated","htmlFor","printReport","window","print","_c$col$key","slice","OverlayTrigger","placement","overlay","Tooltip","contractId","documents","fetchDocuments","handleEdit","confirm","delete","alert","handleDelete","handleRevenue","disabled","tabIndex","role","stopPropagation","t","s","addedDays","contractSigningDate","notes","doc","NavLink","to","filePath","rel","fileName","handleDeleteDoc","AddContract","onClose","multiple","files","formData","FormData","forEach","file","append","post","headers","EditContract","AddRevenue","Footer","State_TYPES","_ref2","navigate","useNavigate","isEditMode","Boolean","isLoading","setIsLoading","isSaving","setIsSaving","success","setSuccess","loansLoading","setLoansLoading","loansError","setLoansError","setFormData","ContractNumber","ContractName","ContractType","CompanyName","LoanId","ContractSigningDate","StartDate","CompleteDate","DurationInDays","AddedDays","ContractAmount","CostPlanMins","CostAfterChange","CostToNatiBank","TotalCostPaid","OperationLoanCost","CashPaid","TaxesAndBlockedmoney","PrivateMoneyPaid","Notes","InsuranceDeposits","TaxTrusts","Penalties","OtherTrusts","validationErrors","setValidationErrors","LoanName","Name","_response$data2","_response$data3","contractData","Object","keys","Error","normalizedData","matchKey","k","dateField","d","isNaN","prev","_err$response","_err$response$data","message","fetchContract","handleChange","Number","renderInput","_formData$name","arguments","undefined","required","onSubmit","preventDefault","validateForm","errors","trim","field","put","_response$data4","setTimeout","_err$response2","_err$response3","_err$response3$data","noValidate","_ref3","_ref4","rows","initialState","CostChange","_formData$ContractTyp","_formData$LoanId","_formData$ContractAmo","_formData$ContractSig","_formData$StartDate","_formData$CompleteDat","_formData$DurationInD","_formData$AddedDays","_formData$CostChange","numericFields","dateFields","setStatus","loading","setLoading","loanLoading","setLoanLoading","loanError","setLoanError","_response$data$loans","log","loansData","params","_err$response2$data","errorMessage","convertedValue","getLoanDisplayName","Title","Id","_err$response4","_err$response4$data","min","step","logoutTooltip","NavBar","username","setUsername","UserDepartment","setUserDepartment","storedUsername","localStorage","getItem","storedUserDepartment","renderNavItem","isActive","margin","axios","Authorization","removeItem","toUpperCase","borderRadius"],"sourceRoot":""}