"use strict";(self.webpackChunkloan_system=self.webpackChunkloan_system||[]).push([[516],{5150:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(6213);const l=n.A.create({baseURL:"http://172.16.2.101:5109",withCredentials:!0});let r=!1,a=[];const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a.forEach((s=>{e?s.reject(e):s.resolve(t)})),a=[]};l.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e})),l.interceptors.response.use((e=>e),(async e=>{const t=e.config;if(t&&!t._retry&&("Access token expired"===e.message||e.response&&401===e.response.status)){if(r)return new Promise(((e,t)=>{a.push({resolve:e,reject:t})})).then((e=>(t.headers.Authorization=`Bearer ${e}`,l(t)))).catch((e=>Promise.reject(e)));t._retry=!0,r=!0;try{const e=await n.A.post("http://172.16.2.101:5109/auth/refresh",{},{withCredentials:!0}),s=e.data.accessToken;e.data.refreshToken;return localStorage.setItem("token",s),i(null,s),t.headers.Authorization=`Bearer ${s}`,l(t)}catch(s){return i(s,null),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/",Promise.reject(s)}finally{r=!1}}return Promise.reject(e)}));const o=l},6435:(e,t,s)=>{s.d(t,{A:()=>a});s(5043);var n=s(615),l=s(1932),r=s(579);function a(){const e=(0,r.jsx)(n.A,{id:"logout-tooltip",className:"custom-tooltip",children:"\u0627\u0644\u0645\u0628\u0631\u0645\u062c\u064a\u0646 : \u0645\u0635\u0637\u0641\u0649 \u0646\u062c\u0645 - \u062c\u064a\u0627\u0646 \u062d\u0633\u064a\u0646"});return(0,r.jsx)(l.A,{placement:"top",className:"custom-tooltip",overlay:e,children:(0,r.jsxs)("footer",{className:"page-footer",children:["\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0642 \u0645\u062d\u0641\u0648\u0638\u0629 \xa9 ",(new Date).getFullYear()," \u0642\u0633\u0645 \u062a\u0642\u0646\u064a\u0629 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a"]})})}},6876:()=>{},6957:(e,t,s)=>{s.d(t,{A:()=>d});var n=s(5043),l=s(3216),r=s(5475),a=s(6213),i=s(1932),o=s(615),c=s(579);function d(){const e=(0,l.Zp)(),[t,s]=(0,n.useState)(""),[d,h]=(0,n.useState)("");(0,n.useEffect)((()=>{const e=localStorage.getItem("username");e&&s(e);const t=localStorage.getItem("UserDepartment");t&&h(t)}),[]);const x=(e,t)=>(0,c.jsx)(r.k2,{to:e,className:e=>{let{isActive:t}=e;return"text-decoration-none nav-link"+(t?" active-link":"")},end:!0,"aria-current":"page",children:t});return(0,c.jsxs)("nav",{className:"bg-custom d-flex justify-content-between flex-row-reverse p-3","aria-label":"Primary navigation",children:[(0,c.jsx)("div",{className:"fs-4 fw-bold hlogo",children:(0,c.jsxs)(r.k2,{to:"/dashboard",className:"nav-brand-link",children:["\u0646\u0638\u0627\u0645 \u0627\u0644\u0645\u0646\u062d \u0648\u0627\u0644\u0642\u0631\u0648\u0636",(0,c.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"0 10px"},children:(0,c.jsx)("img",{src:"/Images/bank.png",className:"logo-shadow-rounded",alt:"",width:"50px",height:"50px"})})]})}),(0,c.jsxs)("ul",{className:"d-flex flex-row-reverse gap-3 list-unstyled mb-0 align-items-center fw-bold",children:[(0,c.jsx)("li",{children:x("/dashboard","\u0627\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629")}),(0,c.jsx)("li",{children:x("/contracts"," \u0627\u0644\u0639\u0642\u0648\u062f")}),(0,c.jsx)("li",{children:x("/Loans"," \u0627\u0644\u0642\u0631\u0648\u0636")}),(0,c.jsx)("li",{children:x("/RevenueList"," \u0627\u0644\u0627\u064a\u0631\u0627\u062f\u0627\u062a")}),(0,c.jsx)("li",{children:x("/AdminPanel","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646")})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,c.jsx)(i.A,{placement:"bottom",overlay:(0,c.jsx)(o.A,{id:"logout-tooltip",children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c"}),children:(0,c.jsxs)("button",{"aria-label":"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",className:"btn btn-outline-danger logoutB",onClick:async()=>{try{await a.A.post("http://localhost:5109/Auth/logout",{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),localStorage.removeItem("token"),localStorage.removeItem("roles"),localStorage.removeItem("username"),e("/")}catch(t){console.error("Logout failed:",t),alert("\u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c\u060c \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.")}},type:"button",children:[(0,c.jsx)("span",{className:"navbar-username",children:t.toUpperCase()}),(0,c.jsx)("img",{className:"PowImg",src:"/Images/power.gif",alt:"Power GIF",style:{borderRadius:"50%"},width:"20",height:"20"})]})}),(0,c.jsx)("h6",{className:"headingDep",children:d||"\u0644\u0627 \u064a\u0648\u062c\u062f \u0642\u0633\u0645"}),(0,c.jsx)("span",{className:"navbar-username",children:(0,c.jsx)(r.k2,{to:"/ChangePassword",className:"nav-brand-link",children:"\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"})})]})]})}},7516:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var n=s(5043),l=s(5150),r=(s(6876),s(6957)),a=s(6435),i=s(3216),o=s(7488),c=s(615),d=s(1932),h=s(579);function x(){var e,t,s,x,j;const[g,m]=(0,n.useState)([]),[p,u]=(0,n.useState)(""),[v,b]=(0,n.useState)(1),[f]=(0,n.useState)(10),[y,N]=(0,n.useState)(1),w=(0,i.Zp)(),[A,k]=(0,n.useState)(""),[I,C]=(0,n.useState)(!1),[S,L]=(0,n.useState)(null),T=e=>{l.A.get(`/Loan/GetAllLoans?page=${e}&pageSize=${f}`).then((e=>{var t,s;console.log("API Response:",e.data);const n=null!==(t=e.data.loans)&&void 0!==t?t:[],l=null!==(s=e.data.totalCount)&&void 0!==s?s:0;m(n),N(Math.max(1,Math.ceil(l/f))),u("")})).catch((e=>{var t;401===(null===(t=e.response)||void 0===t?void 0:t.status)?u("Unauthorized \u2013 please login."):u("Error fetching contracts.")}))},P=(0,h.jsx)(c.A,{id:"logout-tooltip",children:"\u062d\u0630\u0641"}),$=(0,h.jsx)(c.A,{id:"logout-tooltip",children:"\u062a\u0639\u062f\u064a\u0644 "}),_=(0,h.jsx)(c.A,{id:"logout-tooltip",children:"\u062a\u0642\u0631\u064a\u0631 "}),D={1:"\u0642\u0631\u0636 \u062e\u0627\u0631\u062c\u064a",2:"\u0642\u0631\u0636 \u062f\u0627\u062e\u0644\u064a",3:"\u0645\u0646\u062d\u0629"},R=[{id:1,label:"\u0645\u0633\u062a\u0645\u0631"},{id:2,label:"\u062c\u062f\u064a\u062f"},{id:3,label:"\u0645\u0633\u062a\u062d\u062f\u062b"},{id:4,label:"\u0627\u0639\u0627\u062f\u0629 \u0627\u062f\u0631\u0627\u062c"}];(0,n.useEffect)((()=>{T(v)}),[v]);const z=e=>{e>0&&e<=y&&b(e)},B=async e=>{if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0642\u0631\u0636"))try{await l.A.delete(`/Loan/DeleteLoan/${e}`),T(v),(e=>{let{title:t,description:s}=e;(0,o.oR)((0,h.jsxs)("div",{children:[(0,h.jsx)("strong",{children:t}),(0,h.jsx)("div",{children:s})]}),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})({title:"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d",description:""})}catch(t){alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062d\u0630\u0641 \u0627\u0644\u0639\u0642\u062f.")}},E=g.filter((e=>{var t,s;return(null!==(t=null===(s=e.LoanName)||void 0===s?void 0:s.toLowerCase())&&void 0!==t?t:"").includes(A.toLowerCase())}));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.A,{}),(0,h.jsxs)("div",{className:"contracts-container",children:[(0,h.jsxs)("div",{className:"fss",style:{backgroundColor:"#f8961e"},children:[(0,h.jsxs)("div",{children:["\u0627\u0644\u0642\u0631\u0648\u0636 \u0627\u0644\u062e\u0627\u0631\u062c\u064a\u0629: ",E.filter((e=>1==e.loan_Type)).length," \u0645\u0646 \u0623\u0635\u0644 ",E.length]}),(0,h.jsxs)("div",{children:["\u0627\u0644\u0642\u0631\u0648\u0636 \u0627\u0644\u062f\u0627\u062e\u0644\u064a\u0629: ",E.filter((e=>2==e.loan_Type)).length," \u0645\u0646 \u0623\u0635\u0644 ",E.length]}),(0,h.jsxs)("div",{children:["\u0627\u0644\u0645\u0646\u062d: ",E.filter((e=>3==e.loan_Type)).length," \u0645\u0646 \u0623\u0635\u0644 ",E.length]}),(0,h.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,h.jsx)("img",{src:"/Images/statistics.png",alt:"",width:"50px",height:"50px"})})]}),(0,h.jsxs)("div",{className:"d-flex justify-content-around align-items-start",children:[(0,h.jsx)("h2",{children:"\u062c\u062f\u0648\u0644 \u0627\u0644\u0642\u0631\u0648\u0636"}),p&&(0,h.jsx)("p",{className:"error",children:p}),(0,h.jsx)("button",{className:"btn btn-success",children:(0,h.jsxs)("a",{href:"/AddLoan",className:"text-white text-decoration-none",children:["\u0627\u0636\u0627\u0641\u0629 \u0642\u0631\u0636 ",(0,h.jsx)("img",{src:"/Images/signing.png",alt:"",width:"30px",height:"30px"})]})}),(0,h.jsxs)("div",{className:"search-container",children:[(0,h.jsx)("input",{type:"text",className:"search-input",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0642\u0631\u0648\u0636...",value:A,onChange:e=>k(e.target.value)}),(0,h.jsx)("img",{src:"/Images/search.png",alt:"",className:"search-icon"})]})]}),(0,h.jsxs)("table",{className:"contracts-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"\u0627\u0633\u0645 \u0627\u0644\u0642\u0631\u0636"}),(0,h.jsx)("th",{children:"\u0627\u0644\u0645\u064a\u0632\u0627\u0646\u064a\u0629"}),(0,h.jsx)("th",{children:" \u0646\u0648\u0639 \u0627\u0644\u0642\u0631\u0636"}),(0,h.jsx)("th",{children:"\u0627\u0644\u0639\u0645\u0644\u0629"}),(0,h.jsx)("th",{children:"\u0627\u0644\u062c\u0647\u0629 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f\u0629"}),(0,h.jsx)("th",{children:"\u0627\u0644\u0645\u0648\u0642\u0639"}),(0,h.jsx)("th",{children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0634\u0631\u0648\u0639"}),(0,h.jsx)("th",{children:"\u0627\u0644\u0647\u062f\u0641 \u0645\u0646 \u0627\u0644\u0645\u0634\u0631\u0648\u0639"}),(0,h.jsx)("th",{children:"\u0648\u0635\u0641 \u0627\u0644\u0645\u0634\u0631\u0648\u0639"}),(0,h.jsx)("th",{children:"\u0627\u0644\u0627\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,h.jsx)("tbody",{children:E.map((e=>{var t;return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.loanName}),(0,h.jsx)("td",{children:e.budget}),(0,h.jsx)("td",{children:D[e.loan_Type]||"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641"}),(0,h.jsx)("td",{children:e.currency}),(0,h.jsx)("td",{children:e.benfitDep}),(0,h.jsx)("td",{children:e.location}),(0,h.jsx)("td",{children:(null===(t=R.find((t=>t.id===e.projectType)))||void 0===t?void 0:t.label)||"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641"}),(0,h.jsx)("td",{children:e.projectTarget}),(0,h.jsx)("td",{children:e.projectDescription}),(0,h.jsxs)("td",{children:[(0,h.jsx)(d.A,{placement:"top",overlay:(0,h.jsx)(c.A,{children:"\u0639\u0631\u0636"}),children:(0,h.jsx)("button",{className:"btn btn-info btn-sm me-2",onClick:()=>{L(e),C(!0)},children:(0,h.jsx)("img",{src:"/Images/eye-care.png",alt:"",width:"15px",height:"15px"})})}),(0,h.jsx)(d.A,{placement:"top",overlay:$,children:(0,h.jsx)("button",{className:"btn btn-outline-primary btn-sm me-2",onClick:()=>{return t=e.id,void w(`/EditLoan/${t}`);var t},children:(0,h.jsx)("img",{src:"/Images/edit.png",alt:"",width:"15px",height:"15px"})})}),(0,h.jsx)(d.A,{placement:"top",overlay:P,children:(0,h.jsx)("button",{className:"btn btn-danger mx-2 btn-sm",onClick:()=>B(e.id),children:(0,h.jsx)("img",{src:"/Images/trash.png",alt:"",width:"15px",height:"15px"})})}),(0,h.jsx)(d.A,{placement:"top",overlay:_,children:(0,h.jsx)("button",{className:"btn btn-outline-success btn-sm me-2",onClick:()=>(async e=>{w(`/ReportLoan/${e}`)})(e.id),children:(0,h.jsx)("img",{src:"/Images/Report.png",alt:"",width:"15px",height:"15px"})})})]})]})}))})]}),(0,h.jsxs)("div",{className:"pagination",children:[(0,h.jsx)("button",{onClick:()=>z(v-1),disabled:1===v,children:(0,h.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,h.jsx)("img",{src:"/Images/next.png",alt:"",width:"50px",height:"50px"})})}),(0,h.jsxs)("span",{children:["\u0627\u0644\u0635\u0641\u062d\u0629 ",v," \u0645\u0646 ",y]}),(0,h.jsx)("button",{onClick:()=>z(v+1),disabled:v===y,children:(0,h.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,h.jsx)("img",{src:"/Images/previous.png",alt:"",width:"50px",height:"50px"})})})]})]}),I&&S&&(0,h.jsx)("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog",children:(0,h.jsx)("div",{className:"modal-dialog modal-lg",role:"document",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsx)("div",{className:"modal-header",children:(0,h.jsx)("h5",{className:"modal-title",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0642\u0631\u0636"})}),(0,h.jsxs)("div",{className:"modal-body",style:{direction:"rtl",textAlign:"right"},children:[(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0627\u0633\u0645 \u0627\u0644\u0642\u0631\u0636:"})," ",S.loanName]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0646\u0648\u0639 \u0627\u0644\u0642\u0631\u0636:"})," ",D[S.loan_Type]||"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641"]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0627\u0644\u0645\u064a\u0632\u0627\u0646\u064a\u0629:"})," ",S.budget.toLocaleString()]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0627\u0644\u0639\u0645\u0644\u0629:"})," ",S.currency]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0627\u0644\u0645\u0648\u0642\u0639:"})," ",S.location]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0634\u0631\u0648\u0639:"})," ",S.projectType]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0647\u062f\u0641 \u0627\u0644\u0645\u0634\u0631\u0648\u0639:"})," ",S.projectTarget]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0648\u0635\u0641 \u0627\u0644\u0645\u0634\u0631\u0648\u0639:"})," ",S.projectDescription||"\u0644\u0627 \u064a\u0648\u062c\u062f"]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0633\u0646\u0629 \u0627\u0644\u0627\u062f\u062e\u0627\u0644:"})," ",null!==(e=S.putYear)&&void 0!==e?e:"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f\u0629"]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0645\u062f\u0629 \u0627\u0644\u0625\u0646\u062c\u0627\u0632 (\u0633\u0646\u0629):"})," ",null!==(t=S.noYearTOComplete)&&void 0!==t?t:"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f\u0629"]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0633\u0646\u0629 \u0627\u0644\u0625\u0646\u062c\u0627\u0632 \u0627\u0644\u0641\u0639\u0644\u064a\u0629:"})," ",null!==(s=S.actualFinishYear)&&void 0!==s?s:"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f\u0629"]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0636\u0627\u0641\u0629:"})," ",null===(x=S.createdAt)||void 0===x?void 0:x.slice(0,10)]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0622\u062e\u0631 \u062a\u062d\u062f\u064a\u062b:"})," ",null===(j=S.updatedAt)||void 0===j?void 0:j.slice(0,10)]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u0645\u062f\u062e\u0644:"})," ",S.enteredUserName]})]}),(0,h.jsx)("div",{className:"modal-footer",children:(0,h.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(!1),children:"\u0625\u063a\u0644\u0627\u0642"})})]})})}),(0,h.jsx)(a.A,{})]})}}}]);
//# sourceMappingURL=516.9f46e272.chunk.js.map