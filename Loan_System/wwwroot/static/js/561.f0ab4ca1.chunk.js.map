{"version":3,"file":"static/js/561.f0ab4ca1.chunk.js","mappings":"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","sources":["Component/UploadDocuments.js","Api/AxiosClient.js","Component/Footer.js","Component/NavMenu.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport api from '../Api/AxiosClient';\nimport { toast } from 'react-toastify';\nimport NavMenu from './NavMenu';\nimport Footer from './Footer';\n\nexport default function UploadDocuments() {\n  const { id } = useParams(); // Contract ID from route\n  const navigate = useNavigate();\n  const [files, setFiles] = useState([]);\n  const [uploading, setUploading] = useState(false);\n\n  const handleFileChange = (e) => {\n    setFiles(Array.from(e.target.files));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (files.length === 0) {\n      toast.error('يرجى اختيار ملفات للرفع');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('ContractId', id);\n    files.forEach(file => formData.append('Files', file));\n\n    try {\n      setUploading(true);\n      await api.post('/Contracts/UploadContractDocuments', formData, {\n        headers: { 'Content-Type': 'multipart/form-data' },\n      });\n      toast.success('تم رفع الوثائق بنجاح');\n      navigate('/contracts');\n    } catch (error) {\n      console.error(error);\n      toast.error('حدث خطأ أثناء رفع الوثائق');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  return (\n    <>\n      <NavMenu />\n      <div className=\"container mt-5 mb-5\">\n        <h2 className=\"mb-4\">رفع وثائق العقد</h2>\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group mb-3\">\n            <label htmlFor=\"fileUpload\" className=\"form-label\">اختر الملفات:</label>\n            <input\n              type=\"file\"\n              id=\"fileUpload\"\n              className=\"form-control\"\n              multiple\n              onChange={handleFileChange}\n            />\n          </div>\n          <div className=\"d-flex gap-3\">\n            <button type=\"submit\" className=\"btn btn-primary\" disabled={uploading}>\n              {uploading ? 'جارٍ الرفع...' : 'رفع الملفات'}\n            </button>\n            <button type=\"button\" className=\"btn btn-secondary\" onClick={() => navigate(-1)}>\n              رجوع\n            </button>\n          </div>\n        </form>\n        {files.length > 0 && (\n          <div className=\"mt-4\">\n            <h5>الملفات المختارة:</h5>\n            <ul>\n              {files.map((file, index) => (\n                <li key={index}>{file.name}</li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n      <Footer />\n    </>\n  );\n}\n","import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'http://localhost:5109',\n  withCredentials: true\n});\n\nlet isRefreshing = false;\nlet failedQueue = [];\n\nconst processQueue = (error, token = null) => {\n  failedQueue.forEach(promise => {\n    if (error) {\n      promise.reject(error);\n    } else {\n      promise.resolve(token);\n    }\n  });\n  failedQueue = [];\n};\n\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\napi.interceptors.response.use(\n  response => response,\n  async error => {\n    const originalRequest = error.config;\n\n    if (\n      originalRequest &&\n      !originalRequest._retry &&\n      (error.message === \"Access token expired\" || (error.response && error.response.status === 401))\n    ) {\n      if (isRefreshing) {\n        return new Promise((resolve, reject) => {\n          failedQueue.push({ resolve, reject });\n        })\n          .then(token => {\n            originalRequest.headers.Authorization = `Bearer ${token}`;\n            return api(originalRequest);\n          })\n          .catch(err => Promise.reject(err));\n      }\n\n      originalRequest._retry = true;\n      isRefreshing = true;\n\n      try {\n        const response = await axios.post('http://localhost:5109/auth/refresh', {},{withCredentials : true});\n        const newAccessToken = response.data.accessToken;\n        const newRefreshToken = response.data.refreshToken;\n\n        localStorage.setItem('token', newAccessToken);\n\n        processQueue(null, newAccessToken);\n\n        originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n        return api(originalRequest);\n      } catch (err) {\n        processQueue(err, null);\n        localStorage.removeItem(\"token\");\n        localStorage.removeItem(\"refreshToken\");\n        window.location.href = \"/\";\n        return Promise.reject(err);\n      } finally {\n        isRefreshing = false;\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n","import React from 'react';\nimport '../Style/Footer.css';\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap';\n\nexport default function Footer() {\n  const logoutTooltip = <Tooltip id=\"logout-tooltip\" className=\"custom-tooltip\">المبرمجين : مصطفى نجم - جيان حسين</Tooltip>;\n\n  return (\n    <OverlayTrigger placement=\"top\" className=\"custom-tooltip\"  overlay={logoutTooltip}>\n    \n    <footer className=\"page-footer\">\n      جميع الحقوق محفوظة © {new Date().getFullYear()} قسم تقنية المعلومات\n    </footer>\n    </OverlayTrigger>\n    \n  );\n}","import React, { useEffect, useState } from \"react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport \"../Style/NavStyle.css\";\n\nexport default function NavBar() {\n  const navigate = useNavigate();\n  const [username, setUsername] = useState(\"\");\n  const [UserDepartment, setUserDepartment] = useState(\"\");\n\n\n  useEffect(() => {\n    const storedUsername = localStorage.getItem(\"username\");\n    if (storedUsername) {\n      setUsername(storedUsername);\n    }\n\n    const storedUserDepartment = localStorage.getItem(\"UserDepartment\");\n    if (storedUserDepartment) {\n      setUserDepartment(storedUserDepartment);\n    }\n  }, []);\n\n  const handleLogout = async () => {\n    try {\n      await axios.post(\n        \"http://localhost:5109/Auth/logout\",\n        {},\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        }\n      );\n\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"roles\");\n      localStorage.removeItem(\"username\");\n\n      navigate(\"/\");\n    } catch (err) {\n      console.error(\"Logout failed:\", err);\n      alert(\"فشل تسجيل الخروج، حاول مرة أخرى.\");\n    }\n  };\n\n  const renderNavItem = (to, label) => (\n    <NavLink\n      to={to}\n      className={({ isActive }) =>\n        `text-decoration-none nav-link${isActive ? \" active-link\" : \"\"}`\n      }\n      end\n      aria-current=\"page\"\n    >\n      {label}\n    </NavLink>\n  );\n\n  return (\n    <nav\n      className=\"bg-custom d-flex justify-content-between flex-row-reverse p-3\"\n      aria-label=\"Primary navigation\"\n    >\n      <div className=\"fs-4 fw-bold hlogo\">\n        <NavLink to=\"/dashboard\" className=\"nav-brand-link\">\n          نظام المنح والقروض\n          <div style={{ display: 'flex', alignItems: 'center' ,justifyContent: 'center', margin:'0 10px' }}>\n          <img src=\"/Images/bank.png\" className=\"logo-shadow-rounded\" alt=\"\" width=\"50px\" height=\"50px\" /></div>\n\n        </NavLink>\n      </div>\n\n      <ul className=\"d-flex flex-row-reverse gap-3 list-unstyled mb-0 align-items-center fw-bold\">\n        <li>{renderNavItem(\"/dashboard\", \"الصفحة الرئيسية\")}</li>\n        <li>{renderNavItem(\"/contracts\", \" العقود\")}</li>\n        <li>{renderNavItem(\"/Loans\", \" القروض\")}</li>\n        <li>{renderNavItem(\"/RevenueList\", \" الايرادات\")}</li>\n        <li>{renderNavItem(\"/AdminPanel\", \"المستخدمين\")}</li>\n        {/* <li>{renderNavItem(\"/AdminDashboard\", \"لوحة التحكم\")}</li> */}\n      </ul>\n\n      <div className=\"d-flex align-items-center gap-2\">\n        <OverlayTrigger\n          placement=\"bottom\"\n          overlay={<Tooltip id=\"logout-tooltip\">تسجيل الخروج</Tooltip>}\n        >\n          <button\n            aria-label=\"تسجيل الخروج\"\n            className=\"btn btn-outline-danger logoutB\"\n            onClick={handleLogout}\n            type=\"button\"\n          >\n                    <span className=\"navbar-username\">{username.toUpperCase() }</span>\n\n\n            <img\n              className=\"PowImg\"\n              src=\"/Images/power.gif\"\n              alt=\"Power GIF\"\n              style={{ borderRadius: \"50%\" }}\n              width=\"20\"\n              height=\"20\"\n            />\n          </button>\n        </OverlayTrigger>\n<h6 className=\"headingDep\">{UserDepartment || \"لا يوجد قسم\"}</h6>\n                  <span className=\"navbar-username\">\n                              <NavLink to=\"/ChangePassword\" className=\"nav-brand-link\">\n\n                        تغيير كلمة المرور\n                      </NavLink>\n                    </span>\n      </div>\n    </nav>\n  );\n}\n"],"names":["UploadDocuments","id","useParams","navigate","useNavigate","files","setFiles","useState","uploading","setUploading","_jsxs","_Fragment","children","_jsx","NavMenu","className","onSubmit","async","e","preventDefault","length","toast","error","formData","FormData","append","forEach","file","api","post","headers","success","console","htmlFor","type","multiple","onChange","Array","from","target","disabled","onClick","map","index","name","Footer","axios","create","baseURL","withCredentials","isRefreshing","failedQueue","processQueue","token","arguments","undefined","promise","reject","resolve","interceptors","request","use","config","localStorage","getItem","Authorization","response","originalRequest","_retry","message","status","Promise","push","then","catch","err","newAccessToken","data","accessToken","refreshToken","setItem","removeItem","window","location","href","logoutTooltip","Tooltip","OverlayTrigger","placement","overlay","Date","getFullYear","NavBar","username","setUsername","UserDepartment","setUserDepartment","useEffect","storedUsername","storedUserDepartment","renderNavItem","to","label","NavLink","_ref","isActive","end","style","display","alignItems","justifyContent","margin","src","alt","width","height","alert","toUpperCase","borderRadius"],"sourceRoot":""}