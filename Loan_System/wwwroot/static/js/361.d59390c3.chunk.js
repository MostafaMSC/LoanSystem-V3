"use strict";(self.webpackChunkloan_system=self.webpackChunkloan_system||[]).push([[361],{5150:(e,t,r)=>{r.d(t,{A:()=>c});var s=r(6213);const a=s.A.create({baseURL:"http://192.168.0.106",withCredentials:!0});let o=!1,n=[];const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.forEach((r=>{e?r.reject(e):r.resolve(t)})),n=[]};a.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e})),a.interceptors.response.use((e=>e),(async e=>{const t=e.config;if(t&&!t._retry&&("Access token expired"===e.message||e.response&&401===e.response.status)){if(o)return new Promise(((e,t)=>{n.push({resolve:e,reject:t})})).then((e=>(t.headers.Authorization=`Bearer ${e}`,a(t)))).catch((e=>Promise.reject(e)));t._retry=!0,o=!0;try{const e=await s.A.post("http://192.168.0.106/auth/refresh",{},{withCredentials:!0}),r=e.data.accessToken;e.data.refreshToken;return localStorage.setItem("token",r),l(null,r),t.headers.Authorization=`Bearer ${r}`,a(t)}catch(r){return l(r,null),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/",Promise.reject(r)}finally{o=!1}}return Promise.reject(e)}));const c=a},6228:()=>{},8361:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var s=r(5043),a=r(5150),o=r(3216),n=r(5475),l=r(4459),c=r(5727),i=(r(6228),r(3910)),u=r(7929),d=r(579);function p(){const[e,t]=(0,s.useState)(""),[r,p]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),g=(0,o.Zp)(),[x,j]=(0,s.useState)(!1);(0,s.useEffect)((()=>{localStorage.getItem("token")&&g("/dashboard")}),[g]);return(0,d.jsx)("div",{className:"login-container",children:(0,d.jsxs)("form",{className:"login-form",onSubmit:async t=>{t.preventDefault();try{const t=await a.A.post("/Auth/login",{userName:e,password:r});localStorage.setItem("token",t.data.accessToken),localStorage.setItem("roles",JSON.stringify(t.data.roles)),localStorage.setItem("username",t.data.userName),t.data.department?localStorage.setItem("UserDepartment",t.data.department.departmentName):localStorage.setItem("UserDepartment","\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"),m(""),g("/dashboard")}catch(n){var s,o;m((null===(s=n.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0627\u0648 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629")}},children:[(0,d.jsx)("h4",{children:"\u0646\u0638\u0627\u0645 \u0627\u0644\u0645\u0646\u062d \u0648\u0627\u0644\u0642\u0631\u0648\u0636"}),(0,d.jsx)("h6",{children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0627\u0644\u0649 \u0627\u0644\u0646\u0638\u0627\u0645"}),(0,d.jsx)("div",{className:"logo",children:(0,d.jsx)(i.g,{icon:u.wq_,size:"2x",style:{color:"white"}})}),h&&(0,d.jsx)("p",{className:"error",children:h}),(0,d.jsxs)("div",{className:"input-group",children:[(0,d.jsx)(l.A,{className:"icon"}),(0,d.jsx)("input",{type:"text",value:e,autoFocus:!0,onChange:e=>t(e.target.value),placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",required:!0})]}),(0,d.jsxs)("div",{className:"input-group",children:[(0,d.jsx)(c.A,{className:"icon"}),(0,d.jsx)("input",{type:x?"text":"password",value:r,onChange:e=>p(e.target.value),placeholder:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",required:!0}),(0,d.jsx)(i.g,{icon:x?u.k6j:u.pS3,className:"toggle-password",onClick:()=>j((e=>!e)),style:{cursor:"pointer",marginLeft:"10px",color:"#555"}})]}),(0,d.jsxs)("button",{type:"submit",children:[(0,d.jsx)(i.g,{icon:u.pNp,style:{marginLeft:"8px"}}),"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"]}),(0,d.jsx)(n.k2,{to:"/register",onClick:()=>g("/register"),style:{cursor:"pointer",color:"red",marginTop:"10px",display:"block",textDecoration:"none"},children:"\u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0643\u0645\u0633\u062a\u062e\u062f\u0645 \u062c\u062f\u064a\u062f"}),(0,d.jsx)("p",{children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0642 \u0645\u062d\u0641\u0648\u0638\u0629 \xa9 2025 \u0642\u0633\u0645 \u062a\u0642\u0646\u064a\u0629 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a"})]})})}}}]);
//# sourceMappingURL=361.d59390c3.chunk.js.map