{"version":3,"file":"static/js/768.cc7fbd6c.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/building.ts","Component/Register.js"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Building\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMjAiIHg9IjQiIHk9IjIiIHJ4PSIyIiByeT0iMiIgLz4KICA8cGF0aCBkPSJNOSAyMnYtNGg2djQiIC8+CiAgPHBhdGggZD0iTTggNmguMDEiIC8+CiAgPHBhdGggZD0iTTE2IDZoLjAxIiAvPgogIDxwYXRoIGQ9Ik0xMiA2aC4wMSIgLz4KICA8cGF0aCBkPSJNMTIgMTBoLjAxIiAvPgogIDxwYXRoIGQ9Ik0xMiAxNGguMDEiIC8+CiAgPHBhdGggZD0iTTE2IDEwaC4wMSIgLz4KICA8cGF0aCBkPSJNMTYgMTRoLjAxIiAvPgogIDxwYXRoIGQ9Ik04IDEwaC4wMSIgLz4KICA8cGF0aCBkPSJNOCAxNGguMDEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/building\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Building = createLucideIcon('Building', [\n  ['rect', { width: '16', height: '20', x: '4', y: '2', rx: '2', ry: '2', key: '76otgf' }],\n  ['path', { d: 'M9 22v-4h6v4', key: 'r93iot' }],\n  ['path', { d: 'M8 6h.01', key: '1dz90k' }],\n  ['path', { d: 'M16 6h.01', key: '1x0f13' }],\n  ['path', { d: 'M12 6h.01', key: '1vi96p' }],\n  ['path', { d: 'M12 10h.01', key: '1nrarc' }],\n  ['path', { d: 'M12 14h.01', key: '1etili' }],\n  ['path', { d: 'M16 10h.01', key: '1m94wz' }],\n  ['path', { d: 'M16 14h.01', key: '1gbofw' }],\n  ['path', { d: 'M8 10h.01', key: '19clt8' }],\n  ['path', { d: 'M8 14h.01', key: '6423bh' }],\n]);\n\nexport default Building;\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { NavLink, useNavigate } from 'react-router-dom';\nimport { User, Lock, Building } from 'lucide-react';\nimport '../Style/LoginForm.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faLockOpen } from '@fortawesome/free-solid-svg-icons';\n\nexport default function RegisterForm() {\n  const [userName, setUserName] = useState('');\n  const [department, setDepartment] = useState('');\n  const [password, setPassword] = useState('');\n  const [repassword, setRepassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [departments, setDepartments] = useState([]);\n  const [loadingDepartments, setLoadingDepartments] = useState(true);\n  const navigate = useNavigate();\n\n  // Fetch departments from API\n  useEffect(() => {\n    const fetchDepartments = async () => {\n      try {\n        setLoadingDepartments(true);\n        const token = localStorage.getItem('token');\n        const response = await axios.get('http://localhost:5109/Department/GetAllDep?pageSize=100', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n\n        console.log(\"Fetched departments:\", response.data.departments); // Optional: for debugging\n        setDepartments(response.data.departments || []);\n      } catch (err) {\n        console.error('Error fetching departments:', err);\n        setError('فشل في تحميل الأقسام');\n      } finally {\n        setLoadingDepartments(false);\n      }\n    };\n\n    fetchDepartments();\n  }, []);\n\n  const handleRegister = async (e) => {\n    e.preventDefault();\n\n    if (password !== repassword) {\n      setError(\"كلمتا المرور غير متطابقتين\");\n      return;\n    }\n\n    if (!department) {\n      setError(\"يرجى اختيار القسم\");\n      return;\n    }\n    if (password.length < 8) {\n      setError(\"يرجى إدخال كلمة مرور مكونة من 8 أحرف على الأقل\");\n      return;\n    }\n\n    setLoading(true);\n    try {\n      // First register the user\n      await axios.post('http://localhost:5109/Auth/Register', {\n        userName,\n        departmentId: department,\n        password,\n      });\n\n      const loginRes = await axios.post('http://localhost:5109/Auth/login', {\n        username: userName,\n        password: password,\n      });\n\n      const { accessToken, refreshToken, roles, UserName, department: dep } = loginRes.data;\n\n      // Save all data to localStorage\n      localStorage.setItem('token', accessToken);\n      localStorage.setItem('refreshToken', refreshToken);\n      localStorage.setItem('roles', JSON.stringify(roles));\n      localStorage.setItem('userName', UserName);\n\n      if (dep) {\n        localStorage.setItem('department', JSON.stringify(dep));\n        localStorage.setItem('departmentId', dep.id.toString());\n        localStorage.setItem('departmentName', dep.departmentName);\n      }\n\n      setError('');\n      navigate('/dashboard');\n    } catch (err) {\n      console.error(\"Register/Login error:\", err);\n      setError(err.response?.data?.message || \"حدث خطأ أثناء التسجيل\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <form className=\"login-form\" onSubmit={handleRegister}>\n        <h4>نظام المنح والقروض</h4>\n        <h6>تسجيل الدخول كمستخدم جديد إلى النظام</h6>\n\n        {error && <p className=\"error\">{error}</p>}\n\n        <div className=\"input-group\">\n          <User className=\"icon\" />\n          <input\n            type=\"text\"\n            value={userName}\n            onChange={e => setUserName(e.target.value)}\n            placeholder=\"اسم المستخدم\"\n            required\n          />\n        </div>\n\n        <div className=\"input-group\">\n          <Building className=\"icon\" />\n          <select\n            value={department}\n            onChange={e => setDepartment(e.target.value)}\n            required\n            disabled={loadingDepartments}\n            className=\"select-input\"\n            style={{\n              width: '100%',\n              padding: '12px',\n              border: 'none',\n              outline: 'none',\n              background: 'transparent',\n              fontSize: '16px',\n              color: '#333'\n            }}\n          >\n            <option value=\"\" disabled>\n              {loadingDepartments ? 'جاري تحميل الأقسام...' : 'اختر القسم'}\n            </option>\n            {departments.map((dept) => (\n              <option key={dept.id} value={dept.id}>\n                {dept.departmentName}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"input-group\">\n          <Lock className=\"icon\" />\n          <input\n            value={password}\n            onChange={e => setPassword(e.target.value)}\n            type=\"password\"\n            placeholder=\"كلمة المرور\"\n            required\n          />\n        </div>\n\n        <div className=\"input-group\">\n          <Lock className=\"icon\" />\n          <input\n            value={repassword}\n            onChange={e => setRepassword(e.target.value)}\n            type=\"password\"\n            placeholder=\"تأكيد كلمة المرور\"\n            required\n          />\n        </div>\n\n        <button type=\"submit\" disabled={loading}>\n          <FontAwesomeIcon icon={faLockOpen} style={{ marginLeft: '8px' }} />\n          {loading ? \"جارٍ التسجيل...\" : \"تسجيل مستخدم جديد\"}\n        </button>\n\n        <NavLink\n          to=\"/\"\n          onClick={() => navigate('/')}\n          style={{ cursor: 'pointer', color: 'red', display: 'block', marginTop: '1rem', textDecoration: 'none' }}\n        >\n          امتلك حساب بالفعل\n        </NavLink>\n\n        <p className=\"footer\">جميع الحقوق محفوظة© 2025 قسم تقنية المعلومات</p>\n      </form>\n    </div>\n  );\n}\n"],"names":["Building","createLucideIcon","width","height","x","y","rx","ry","key","d","RegisterForm","userName","setUserName","useState","department","setDepartment","password","setPassword","repassword","setRepassword","error","setError","loading","setLoading","departments","setDepartments","loadingDepartments","setLoadingDepartments","navigate","useNavigate","useEffect","async","token","localStorage","getItem","response","axios","get","headers","Authorization","console","log","data","err","fetchDepartments","_jsx","className","children","_jsxs","onSubmit","e","preventDefault","length","post","departmentId","loginRes","username","accessToken","refreshToken","roles","UserName","dep","setItem","JSON","stringify","id","toString","departmentName","_err$response","_err$response$data","message","User","type","value","onChange","target","placeholder","required","disabled","style","padding","border","outline","background","fontSize","color","map","dept","Lock","FontAwesomeIcon","icon","faLockOpen","marginLeft","NavLink","to","onClick","cursor","display","marginTop","textDecoration"],"sourceRoot":""}