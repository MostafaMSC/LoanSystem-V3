{"version":3,"file":"static/js/361.6602ec88.chunk.js","mappings":"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","sources":["Api/AxiosClient.js","Component/Login.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'http://localhost:5109',\n  withCredentials: true\n});\n\nlet isRefreshing = false;\nlet failedQueue = [];\n\nconst processQueue = (error, token = null) => {\n  failedQueue.forEach(promise => {\n    if (error) {\n      promise.reject(error);\n    } else {\n      promise.resolve(token);\n    }\n  });\n  failedQueue = [];\n};\n\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\napi.interceptors.response.use(\n  response => response,\n  async error => {\n    const originalRequest = error.config;\n\n    if (\n      originalRequest &&\n      !originalRequest._retry &&\n      (error.message === \"Access token expired\" || (error.response && error.response.status === 401))\n    ) {\n      if (isRefreshing) {\n        return new Promise((resolve, reject) => {\n          failedQueue.push({ resolve, reject });\n        })\n          .then(token => {\n            originalRequest.headers.Authorization = `Bearer ${token}`;\n            return api(originalRequest);\n          })\n          .catch(err => Promise.reject(err));\n      }\n\n      originalRequest._retry = true;\n      isRefreshing = true;\n\n      try {\n        const response = await axios.post('http://localhost:5109/auth/refresh', {},{withCredentials : true});\n        const newAccessToken = response.data.accessToken;\n        const newRefreshToken = response.data.refreshToken;\n\n        localStorage.setItem('token', newAccessToken);\n\n        processQueue(null, newAccessToken);\n\n        originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n        return api(originalRequest);\n      } catch (err) {\n        processQueue(err, null);\n        localStorage.removeItem(\"token\");\n        localStorage.removeItem(\"refreshToken\");\n        window.location.href = \"/\";\n        return Promise.reject(err);\n      } finally {\n        isRefreshing = false;\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n","  import React, { useEffect, useState } from 'react';\n  import api from '../Api/AxiosClient'\n  import { NavLink, useNavigate } from 'react-router-dom';\n  import { User, Lock } from 'lucide-react';\n  import '../Style/LoginForm.css';\n  import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n  import { faCoins, faLockOpen } from '@fortawesome/free-solid-svg-icons';\n  import { faEye, faEyeSlash } from '@fortawesome/free-solid-svg-icons';\n\n  export default function LoginForm() {\n    const [userName, setUserName] = useState('');\n    const [password, setPassword] = useState(''); \n    const [error, setError] = useState('');\n    const navigate = useNavigate();\n    const [showPassword, setShowPassword] = useState(false);\n\n    useEffect(() => {\n      const token = localStorage.getItem('token');\n      if (token) {\n        navigate('/dashboard');\n      }\n    }, [navigate]);\n\n    // ✅ Handle login submission\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await api.post('/Auth/login', {\n        userName,\n        password,\n      });\n\n      localStorage.setItem('token', res.data.accessToken);\n      localStorage.setItem('roles', JSON.stringify(res.data.roles));\n      localStorage.setItem(\"username\", res.data.userName);\n  if (res.data.department) {\n    localStorage.setItem(\"UserDepartment\", res.data.department.departmentName);\n  } else {\n    localStorage.setItem(\"UserDepartment\", \"غير محدد\");\n  }\n      setError('');\n      navigate('/dashboard');\n    } catch (err) {\n      setError(err.response?.data?.message || \"اسم المستخدم او كلمة المرور غير صحيحة\");\n    }\n  };\n    return (\n      <div className=\"login-container\">\n        <form className=\"login-form\" onSubmit={handleLogin}>\n          <h4>نظام المنح والقروض</h4>\n          <h6>تسجيل الدخول الى النظام</h6>\n\n          <div className=\"logo\">\n            <FontAwesomeIcon icon={faCoins} size=\"2x\" style={{ color: 'white' }} />\n          </div>\n\n          {error && <p className=\"error\">{error}</p>}\n\n          <div className=\"input-group\">\n            <User className=\"icon\" />\n            <input\n              type=\"text\"\n              value={userName}\n              autoFocus\n              onChange={e => setUserName(e.target.value)}\n              placeholder=\"اسم المستخدم\"\n              required\n            />\n          </div>\n\n          <div className=\"input-group\">\n            <Lock className=\"icon\" />\n            <input\n              type={showPassword ? \"text\" : \"password\"}\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n              placeholder=\"كلمة المرور\"\n              required\n            />\n    <FontAwesomeIcon\n      icon={showPassword ? faEyeSlash : faEye}\n      className=\"toggle-password\"\n      onClick={() => setShowPassword(prev => !prev)}\n      style={{ cursor: \"pointer\", marginLeft: \"10px\", color: \"#555\" }}\n    />\n          </div>\n\n          <button type=\"submit\">\n            <FontAwesomeIcon icon={faLockOpen} style={{ marginLeft: '8px' }} />\n            تسجيل الدخول\n          </button>\n\n          <NavLink to='/register'\n            onClick={() => navigate('/register')}\n            style={{ cursor: 'pointer', color: 'red', marginTop: '10px', display: 'block', textDecoration:'none' }}\n          >\n            التسجيل كمستخدم جديد\n          </NavLink>\n\n          <p>جميع الحقوق محفوظة © 2025 قسم تقنية المعلومات</p>\n        </form>\n      </div>\n    );\n  }\n"],"names":["api","axios","create","baseURL","withCredentials","isRefreshing","failedQueue","processQueue","error","token","arguments","length","undefined","forEach","promise","reject","resolve","interceptors","request","use","config","localStorage","getItem","headers","Authorization","response","async","originalRequest","_retry","message","status","Promise","push","then","catch","err","post","newAccessToken","data","accessToken","refreshToken","setItem","removeItem","window","location","href","LoginForm","userName","setUserName","useState","password","setPassword","setError","navigate","useNavigate","showPassword","setShowPassword","useEffect","_jsx","className","children","_jsxs","onSubmit","e","preventDefault","res","JSON","stringify","roles","department","departmentName","_err$response","_err$response$data","FontAwesomeIcon","icon","faCoins","size","style","color","User","type","value","autoFocus","onChange","target","placeholder","required","Lock","faEyeSlash","faEye","onClick","prev","cursor","marginLeft","faLockOpen","NavLink","to","marginTop","display","textDecoration"],"sourceRoot":""}