"use strict";(self.webpackChunkloan_system=self.webpackChunkloan_system||[]).push([[101,491],{562:()=>{},5150:(e,a,l)=>{l.d(a,{A:()=>c});var s=l(6213);const n=s.A.create({baseURL:"http://192.168.0.106",withCredentials:!0});let t=!1,o=[];const r=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o.forEach((l=>{e?l.reject(e):l.resolve(a)})),o=[]};n.interceptors.request.use((e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e})),n.interceptors.response.use((e=>e),(async e=>{const a=e.config;if(a&&!a._retry&&("Access token expired"===e.message||e.response&&401===e.response.status)){if(t)return new Promise(((e,a)=>{o.push({resolve:e,reject:a})})).then((e=>(a.headers.Authorization=`Bearer ${e}`,n(a)))).catch((e=>Promise.reject(e)));a._retry=!0,t=!0;try{const e=await s.A.post("http://192.168.0.106/auth/refresh",{},{withCredentials:!0}),l=e.data.accessToken;e.data.refreshToken;return localStorage.setItem("token",l),r(null,l),a.headers.Authorization=`Bearer ${l}`,n(a)}catch(l){return r(l,null),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/",Promise.reject(l)}finally{t=!1}}return Promise.reject(e)}));const c=n},6101:(e,a,l)=>{l.r(a),l.d(a,{default:()=>d});var s=l(5043),n=l(5150),t=(l(6957),l(6435)),o=(l(562),l(7488)),r=l(3216),c=l(579);const i={ContractNumber:"",ContractName:"",ContractType:null,CompanyName:"",Status:"",LoanId:null,ContractSigningDate:null,StartDate:null,CompleteDate:null,DurationInDays:null,AddedDays:null,ContractAmount:null,CostPlanMins:null,CostAfterChange:null,CostToNatiBank:null,TotalCostPaid:null,OperationLoanCost:null,CashPaid:null,TaxesAndBlockedmoney:null,PrivateMoneyPaid:null,Notes:"",CostChange:null};function d(e){var a,l,d,m,u,h,x,p,v;let{onClose:j}=e;const g=(0,r.Zp)(),N=["ContractType","LoanId","DurationInDays","AddedDays","ContractAmount","CostPlanMins","CostAfterChange","CostToNatiBank","TotalCostPaid","OperationLoanCost","CashPaid","TaxesAndBlockedmoney","PrivateMoneyPaid","CostChange"],b=["ContractSigningDate","StartDate","CompleteDate"],[C,f]=(0,s.useState)(i),[y,A]=(0,s.useState)({loading:!1,error:"",success:""}),[S,k]=(0,s.useState)(!1),[D,w]=(0,s.useState)([]),[I,P]=(0,s.useState)(!1),[T,L]=(0,s.useState)("");(0,s.useEffect)((()=>{(async()=>{P(!0),L("");try{var e,a;console.log("Fetching loans...");const l=null!==(e=null===(a=(await n.A.get("/Loan/GetAllLoans",{params:{page:1,pageSize:1e3}})).data)||void 0===a?void 0:a.loans)&&void 0!==e?e:[];w(l),0===l.length&&L("\u0644\u0627 \u062a\u0648\u062c\u062f \u0642\u0631\u0648\u0636 \u0645\u062a\u0627\u062d\u0629")}catch(o){var l,s,t;const e=401===(null===(l=o.response)||void 0===l?void 0:l.status)?"\u063a\u064a\u0631 \u0645\u0635\u0631\u062d \u2013 \u0627\u0644\u0631\u062c\u0627\u0621 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644.":(null===(s=o.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0627\u0644\u0642\u0631\u0648\u0636.";L(e)}finally{P(!1)}})()}),[]);const B=e=>{const{name:a,value:l}=e.target;let s=l;N.includes(a)?(s=""===l?null:Number(l),isNaN(s)&&(s=null)):b.includes(a)&&(s=""===l?null:l),f((e=>({...e,[a]:s})))},q=e=>e.loanName||e.LoanName||e.name||e.Name||e.title||e.Title||`\u0642\u0631\u0636 \u0631\u0642\u0645 ${e.id||e.Id}`;return(0,c.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[(0,c.jsx)("main",{className:"flex-fill container my-4",children:(0,c.jsxs)("div",{className:"contract-form-container",children:[(0,c.jsx)("h2",{className:"mb-4",children:"\u0625\u0636\u0627\u0641\u0629 \u0639\u0642\u062f \u062c\u062f\u064a\u062f"}),y.error&&(0,c.jsx)("div",{className:"alert alert-danger",children:y.error}),y.success&&(0,c.jsx)("div",{className:"alert alert-success",children:y.success}),(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),A((e=>({...e,error:"",success:""}))),null!==C.ContractAmount&&C.ContractAmount<0)A((e=>({...e,error:"\u0645\u0628\u0644\u063a \u0627\u0644\u0639\u0642\u062f \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0627\u064b."})));else{k(!0);try{await n.A.post("/Contracts/AddContract",C);A((e=>({...e,success:"\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0642\u062f \u0628\u0646\u062c\u0627\u062d!"}))),(e=>{let{title:a,description:l}=e;(0,o.oR)((0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:a}),(0,c.jsx)("div",{children:l})]}),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})({title:"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d",description:`\u062a\u0645\u062a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0642\u062f ${C.ContractName} \u0644\u0644\u0634\u0631\u0643\u0629 ${C.CompanyName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}`}),f(i)}catch(t){var a,l,s;401===(null===t||void 0===t||null===(a=t.response)||void 0===a?void 0:a.status)||((null===t||void 0===t||null===(l=t.response)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.message)||(null===t||void 0===t||t.message))}finally{k(!1),j&&j()}}},className:"row g-3",children:[(0,c.jsx)("div",{className:"col-12",children:(0,c.jsx)("h4",{className:"text-primary border-bottom pb-2",children:"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629"})}),(0,c.jsxs)("div",{className:"col",children:[(0,c.jsxs)("label",{className:"form-label",children:["\u0631\u0642\u0645 \u0627\u0644\u0639\u0642\u062f ",(0,c.jsx)("span",{className:"text-danger",children:"*"}),":"]}),(0,c.jsx)("input",{type:"text",name:"ContractNumber",required:!0,className:"form-control",value:C.ContractNumber,onChange:B,placeholder:"\u0623\u062f\u062e\u0644 \u0631\u0642\u0645 \u0627\u0644\u0639\u0642\u062f"})]}),(0,c.jsxs)("div",{className:"col",children:[(0,c.jsxs)("label",{className:"form-label",children:["\u0627\u0633\u0645 \u0627\u0644\u0639\u0642\u062f ",(0,c.jsx)("span",{className:"text-danger",children:"*"}),":"]}),(0,c.jsx)("input",{type:"text",name:"ContractName",className:"form-control",value:C.ContractName,onChange:B,required:!0,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0639\u0642\u062f"})]}),(0,c.jsxs)("div",{className:"col-md-4",children:[(0,c.jsx)("label",{className:"form-label",children:"\u0646\u0648\u0639 \u0627\u0644\u0639\u0642\u062f:"}),(0,c.jsxs)("select",{required:!0,name:"ContractType",className:"form-control",value:null!==(a=C.ContractType)&&void 0!==a?a:"",onChange:B,children:[(0,c.jsx)("option",{value:"",children:"-- \u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0639\u0642\u062f --"}),(0,c.jsx)("option",{value:1,children:"\u0627\u0633\u062a\u0634\u0627\u0631\u064a (Mentor)"}),(0,c.jsx)("option",{value:2,children:"\u062a\u062c\u0647\u064a\u0632 (Equipment)"}),(0,c.jsx)("option",{value:3,children:"\u0627\u0639\u0645\u0627\u0644 (Work)"}),(0,c.jsx)("option",{value:4,children:"\u0627\u062e\u0631\u0649 (Others)"})]})]}),(0,c.jsxs)("div",{className:"col-md-4",children:[(0,c.jsx)("label",{className:"form-label",children:"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629:"}),(0,c.jsx)("input",{type:"text",name:"CompanyName",className:"form-control",value:C.CompanyName,onChange:B,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629"})]}),(0,c.jsxs)("div",{className:"col-md-4",children:[(0,c.jsx)("label",{className:"form-label",children:"\u0627\u0644\u062d\u0627\u0644\u0629:"}),(0,c.jsxs)("select",{type:"text",name:"Status",className:"form-control",value:C.Status,onChange:B,placeholder:"\u062d\u0627\u0644\u0629 \u0627\u0644\u0639\u0642\u062f",children:[(0,c.jsx)("option",{value:"",children:"-- \u0627\u062e\u062a\u0631 \u062d\u0627\u0644\u0629 \u0627\u0644\u0639\u0642\u062f --"}),(0,c.jsx)("option",{value:"1",children:"\u0645\u0633\u062a\u0645\u0631"}),(0,c.jsx)("option",{value:"2",children:"\u0645\u0646\u062c\u0632"})]})]}),(0,c.jsxs)("div",{className:"col",children:[(0,c.jsx)("label",{className:"form-label",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0642\u0631\u0636 \u0627\u0644\u0645\u0631\u062a\u0628\u0637:"}),I?(0,c.jsxs)("div",{className:"form-control d-flex align-items-center",children:[(0,c.jsx)("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"\u062c\u0627\u0631\u064d \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0642\u0631\u0648\u0636..."]}):T?(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"form-control text-danger",children:T}),(0,c.jsx)("small",{className:"text-muted",children:"\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u062e\u0627\u062f\u0645 \u0623\u0648 \u0635\u0644\u0627\u062d\u064a\u0627\u062a\u0643"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("select",{name:"LoanId",className:"form-control",value:null!==(l=C.LoanId)&&void 0!==l?l:"",onChange:B,required:!0,children:[(0,c.jsx)("option",{value:"",children:"-- \u0627\u062e\u062a\u0631 \u0627\u0644\u0642\u0631\u0636 --"}),D.map((e=>(0,c.jsx)("option",{value:e.id||e.Id,children:q(e)},e.id||e.Id)))]}),0===D.length&&(0,c.jsx)("small",{className:"text-muted",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0642\u0631\u0648\u0636 \u0645\u062a\u0627\u062d\u0629"})]})]}),(0,c.jsxs)("div",{className:"col",children:[(0,c.jsx)("label",{className:"form-label",children:"\u0645\u0628\u0644\u063a \u0627\u0644\u0639\u0642\u062f:"}),(0,c.jsx)("input",{type:"number",name:"ContractAmount",className:"form-control",value:null!==(d=C.ContractAmount)&&void 0!==d?d:"",onChange:B,required:!0,min:"0",step:"0.01",placeholder:"0.00"})]}),(0,c.jsx)("div",{className:"col-12 mt-4",children:(0,c.jsx)("h4",{className:"text-primary border-bottom pb-2",children:"\u0627\u0644\u062a\u0648\u0627\u0631\u064a\u062e \u0648\u0627\u0644\u0645\u062f\u062f"})}),(0,c.jsxs)("div",{className:"col-md-4",children:[(0,c.jsx)("label",{className:"form-label",children:"\u062a\u0627\u0631\u064a\u062e \u062a\u0648\u0642\u064a\u0639 \u0627\u0644\u0639\u0642\u062f:"}),(0,c.jsx)("input",{type:"date",name:"ContractSigningDate",className:"form-control",value:null!==(m=C.ContractSigningDate)&&void 0!==m?m:"",onChange:B})]}),(0,c.jsxs)("div",{className:"col-md-4",children:[(0,c.jsx)("label",{className:"form-label",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u0629:"}),(0,c.jsx)("input",{type:"date",name:"StartDate",className:"form-control",value:null!==(u=C.StartDate)&&void 0!==u?u:"",onChange:B})]}),(0,c.jsxs)("div",{className:"col-md-4",children:[(0,c.jsx)("label",{className:"form-label",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0646\u062c\u0627\u0632:"}),(0,c.jsx)("input",{type:"date",name:"CompleteDate",className:"form-control",value:null!==(h=C.CompleteDate)&&void 0!==h?h:"",onChange:B})]}),(0,c.jsxs)("div",{className:"col",children:[(0,c.jsx)("label",{className:"form-label",children:"\u0627\u0644\u0645\u062f\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 (\u064a\u0648\u0645):"}),(0,c.jsx)("input",{type:"number",name:"DurationInDays",className:"form-control",value:null!==(x=C.DurationInDays)&&void 0!==x?x:"",onChange:B,min:"1",placeholder:"\u0639\u062f\u062f \u0627\u0644\u0623\u064a\u0627\u0645"})]}),(0,c.jsxs)("div",{className:"col",children:[(0,c.jsx)("label",{className:"form-label",children:"\u0627\u0644\u0645\u062f\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629 (\u064a\u0648\u0645):"}),(0,c.jsx)("input",{type:"number",name:"AddedDays",className:"form-control",value:null!==(p=C.AddedDays)&&void 0!==p?p:"",onChange:B,min:"0",placeholder:"\u0627\u0644\u0623\u064a\u0627\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u064a\u0629"})]}),(0,c.jsxs)("div",{className:"col",children:[(0,c.jsx)("label",{className:"form-label",children:"\u0627\u0648\u0627\u0645\u0631 \u0627\u0644\u063a\u064a\u0627\u0631:"}),(0,c.jsx)("input",{type:"number",name:"CostChange",className:"form-control",value:null!==(v=C.CostChange)&&void 0!==v?v:"",onChange:B,required:!0,min:"0",step:"0.01",placeholder:"0.00"})]}),(0,c.jsx)("div",{className:"col-12 mt-4",children:(0,c.jsx)("h4",{className:"text-primary border-bottom pb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"})}),(0,c.jsx)("div",{className:"col-12",children:(0,c.jsx)("textarea",{name:"Notes",className:"form-control",rows:"4",value:C.Notes,onChange:B,placeholder:"\u0627\u0643\u062a\u0628 \u0623\u064a \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 \u0647\u0646\u0627..."})}),(0,c.jsx)("div",{className:"col-12 mt-4",children:(0,c.jsxs)("div",{className:"d-flex gap-3",children:[(0,c.jsx)("button",{type:"submit",className:"btn btn-success btn-lg px-4",disabled:S,onClick:()=>{},children:S?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0631\u0633\u0627\u0644..."]}):"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0642\u062f"}),(0,c.jsx)("button",{type:"button",className:"btn btn-secondary btn-lg px-4",onClick:()=>{f(i),A({loading:!1,error:"",success:""}),g("/contracts"),j&&j()},disabled:S,children:"\u0625\u0644\u063a\u0627\u0621 / \u0645\u0633\u062d"})]})})]})]})}),(0,c.jsx)(t.A,{})]})}},6435:(e,a,l)=>{l.d(a,{A:()=>o});l(5043);var s=l(615),n=l(1932),t=l(579);function o(){const e=(0,t.jsx)(s.A,{id:"logout-tooltip",className:"custom-tooltip",children:"\u0627\u0644\u0645\u0628\u0631\u0645\u062c\u064a\u0646 : \u0645\u0635\u0637\u0641\u0649 \u0646\u062c\u0645 - \u062c\u064a\u0627\u0646 \u062d\u0633\u064a\u0646"});return(0,t.jsx)(n.A,{placement:"top",className:"custom-tooltip",overlay:e,children:(0,t.jsxs)("footer",{className:"page-footer",children:["\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0642 \u0645\u062d\u0641\u0648\u0638\u0629 \xa9 ",(new Date).getFullYear()," \u0642\u0633\u0645 \u062a\u0642\u0646\u064a\u0629 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a"]})})}},6957:(e,a,l)=>{l.d(a,{A:()=>d});var s=l(5043),n=l(3216),t=l(5475),o=l(6213),r=l(1932),c=l(615),i=l(579);function d(){const e=(0,n.Zp)(),[a,l]=(0,s.useState)(""),[d,m]=(0,s.useState)("");(0,s.useEffect)((()=>{const e=localStorage.getItem("username");e&&l(e);const a=localStorage.getItem("UserDepartment");a&&m(a)}),[]);const u=(e,a)=>(0,i.jsx)(t.k2,{to:e,className:e=>{let{isActive:a}=e;return"text-decoration-none nav-link"+(a?" active-link":"")},end:!0,"aria-current":"page",children:a});return(0,i.jsxs)("nav",{className:"bg-custom d-flex justify-content-between flex-row-reverse p-3","aria-label":"Primary navigation",children:[(0,i.jsx)("div",{className:"fs-4 fw-bold hlogo",children:(0,i.jsxs)(t.k2,{to:"/dashboard",className:"nav-brand-link",children:["\u0646\u0638\u0627\u0645 \u0627\u0644\u0645\u0646\u062d \u0648\u0627\u0644\u0642\u0631\u0648\u0636",(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"0 10px"},children:(0,i.jsx)("img",{src:"/Images/bank.png",className:"logo-shadow-rounded",alt:"",width:"50px",height:"50px"})})]})}),(0,i.jsxs)("ul",{className:"d-flex flex-row-reverse gap-3 list-unstyled mb-0 align-items-center fw-bold",children:[(0,i.jsx)("li",{children:u("/dashboard","\u0627\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629")}),(0,i.jsx)("li",{children:u("/contracts"," \u0627\u0644\u0639\u0642\u0648\u062f")}),(0,i.jsx)("li",{children:u("/Loans"," \u0627\u0644\u0642\u0631\u0648\u0636")}),(0,i.jsx)("li",{children:u("/RevenueList"," \u0627\u0644\u0627\u064a\u0631\u0627\u062f\u0627\u062a")}),(0,i.jsx)("li",{children:u("/AdminPanel","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646")})]}),(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,i.jsx)(r.A,{placement:"bottom",overlay:(0,i.jsx)(c.A,{id:"logout-tooltip",children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c"}),children:(0,i.jsxs)("button",{"aria-label":"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",className:"btn btn-outline-danger logoutB",onClick:async()=>{try{await o.A.post("http://localhost:5109/Auth/logout",{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),localStorage.removeItem("token"),localStorage.removeItem("roles"),localStorage.removeItem("username"),e("/")}catch(a){console.error("Logout failed:",a),alert("\u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c\u060c \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.")}},type:"button",children:[(0,i.jsx)("span",{className:"navbar-username",children:a.toUpperCase()}),(0,i.jsx)("img",{className:"PowImg",src:"/Images/power.gif",alt:"Power GIF",style:{borderRadius:"50%"},width:"20",height:"20"})]})}),(0,i.jsx)("h6",{className:"headingDep",children:d||"\u0644\u0627 \u064a\u0648\u062c\u062f \u0642\u0633\u0645"}),(0,i.jsx)("span",{className:"navbar-username",children:(0,i.jsx)(t.k2,{to:"/ChangePassword",className:"nav-brand-link",children:"\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"})})]})]})}}}]);
//# sourceMappingURL=101.506ce5de.chunk.js.map