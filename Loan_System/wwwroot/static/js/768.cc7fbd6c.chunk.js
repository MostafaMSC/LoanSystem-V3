/*! For license information please see 768.cc7fbd6c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkloan_system=self.webpackChunkloan_system||[]).push([[768],{5768:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=a(5043),r=a(6213),o=a(3216),l=a(5475),n=a(4459);const i=(0,a(7784).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var d=a(5727),c=(a(6228),a(3910)),p=a(7929),h=a(579);function u(){const[e,t]=(0,s.useState)(""),[a,u]=(0,s.useState)(""),[m,g]=(0,s.useState)(""),[x,y]=(0,s.useState)(""),[f,k]=(0,s.useState)(""),[v,j]=(0,s.useState)(!1),[N,S]=(0,s.useState)([]),[b,w]=(0,s.useState)(!0),A=(0,o.Zp)();(0,s.useEffect)((()=>{(async()=>{try{w(!0);const e=localStorage.getItem("token"),t=await r.A.get("http://localhost:5109/Department/GetAllDep?pageSize=100",{headers:{Authorization:`Bearer ${e}`}});console.log("Fetched departments:",t.data.departments),S(t.data.departments||[])}catch(e){console.error("Error fetching departments:",e),k("\u0641\u0634\u0644 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0623\u0642\u0633\u0627\u0645")}finally{w(!1)}})()}),[]);return(0,h.jsx)("div",{className:"login-container",children:(0,h.jsxs)("form",{className:"login-form",onSubmit:async t=>{if(t.preventDefault(),m===x)if(a)if(m.length<8)k("\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0643\u0644\u0645\u0629 \u0645\u0631\u0648\u0631 \u0645\u0643\u0648\u0646\u0629 \u0645\u0646 8 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644");else{j(!0);try{await r.A.post("http://localhost:5109/Auth/Register",{userName:e,departmentId:a,password:m});const t=await r.A.post("http://localhost:5109/Auth/login",{username:e,password:m}),{accessToken:s,refreshToken:o,roles:l,UserName:n,department:i}=t.data;localStorage.setItem("token",s),localStorage.setItem("refreshToken",o),localStorage.setItem("roles",JSON.stringify(l)),localStorage.setItem("userName",n),i&&(localStorage.setItem("department",JSON.stringify(i)),localStorage.setItem("departmentId",i.id.toString()),localStorage.setItem("departmentName",i.departmentName)),k(""),A("/dashboard")}catch(l){var s,o;console.error("Register/Login error:",l),k((null===(s=l.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u062a\u0633\u062c\u064a\u0644")}finally{j(!1)}}else k("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645");else k("\u0643\u0644\u0645\u062a\u0627 \u0627\u0644\u0645\u0631\u0648\u0631 \u063a\u064a\u0631 \u0645\u062a\u0637\u0627\u0628\u0642\u062a\u064a\u0646")},children:[(0,h.jsx)("h4",{children:"\u0646\u0638\u0627\u0645 \u0627\u0644\u0645\u0646\u062d \u0648\u0627\u0644\u0642\u0631\u0648\u0636"}),(0,h.jsx)("h6",{children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0643\u0645\u0633\u062a\u062e\u062f\u0645 \u062c\u062f\u064a\u062f \u0625\u0644\u0649 \u0627\u0644\u0646\u0638\u0627\u0645"}),f&&(0,h.jsx)("p",{className:"error",children:f}),(0,h.jsxs)("div",{className:"input-group",children:[(0,h.jsx)(n.A,{className:"icon"}),(0,h.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",required:!0})]}),(0,h.jsxs)("div",{className:"input-group",children:[(0,h.jsx)(i,{className:"icon"}),(0,h.jsxs)("select",{value:a,onChange:e=>u(e.target.value),required:!0,disabled:b,className:"select-input",style:{width:"100%",padding:"12px",border:"none",outline:"none",background:"transparent",fontSize:"16px",color:"#333"},children:[(0,h.jsx)("option",{value:"",disabled:!0,children:b?"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0623\u0642\u0633\u0627\u0645...":"\u0627\u062e\u062a\u0631 \u0627\u0644\u0642\u0633\u0645"}),N.map((e=>(0,h.jsx)("option",{value:e.id,children:e.departmentName},e.id)))]})]}),(0,h.jsxs)("div",{className:"input-group",children:[(0,h.jsx)(d.A,{className:"icon"}),(0,h.jsx)("input",{value:m,onChange:e=>g(e.target.value),type:"password",placeholder:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",required:!0})]}),(0,h.jsxs)("div",{className:"input-group",children:[(0,h.jsx)(d.A,{className:"icon"}),(0,h.jsx)("input",{value:x,onChange:e=>y(e.target.value),type:"password",placeholder:"\u062a\u0623\u0643\u064a\u062f \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",required:!0})]}),(0,h.jsxs)("button",{type:"submit",disabled:v,children:[(0,h.jsx)(c.g,{icon:p.pNp,style:{marginLeft:"8px"}}),v?"\u062c\u0627\u0631\u064d \u0627\u0644\u062a\u0633\u062c\u064a\u0644...":"\u062a\u0633\u062c\u064a\u0644 \u0645\u0633\u062a\u062e\u062f\u0645 \u062c\u062f\u064a\u062f"]}),(0,h.jsx)(l.k2,{to:"/",onClick:()=>A("/"),style:{cursor:"pointer",color:"red",display:"block",marginTop:"1rem",textDecoration:"none"},children:"\u0627\u0645\u062a\u0644\u0643 \u062d\u0633\u0627\u0628 \u0628\u0627\u0644\u0641\u0639\u0644"}),(0,h.jsx)("p",{className:"footer",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0642 \u0645\u062d\u0641\u0648\u0638\u0629\xa9 2025 \u0642\u0633\u0645 \u062a\u0642\u0646\u064a\u0629 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a"})]})})}},6228:()=>{}}]);
//# sourceMappingURL=768.cc7fbd6c.chunk.js.map